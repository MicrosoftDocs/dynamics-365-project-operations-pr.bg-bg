---
title: Съображения за надстройка – Microsoft Dynamics 365 Project Service Automation, версия 2.x или 1.x до версия 3
description: Тази тема предоставя информация за съображенията, които трябва да вземете предвид, когато надстройвате от Project Service Automation, версия 2.x или 1.x до версия 3.
manager: kfend
ms.service: business-applications
ms.custom:
- dyn365-projectservice
ms.date: 11/13/2018
ms.topic: article
ms.prod: ''
ms.technology: Dynamics 365 Project Service Automation 3.x
author: JohnPBurrows
ms.assetid: e4fae2ea-9013-488e-a666-f7192dd42c0b
ms.author: john.burrows
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
ms.openlocfilehash: ba710eb8c07df7dac97e8b911184c00b87b14548
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 03/24/2020
ms.locfileid: "3749319"
---
# <a name="upgrade-considerations---psa-version-2x-or-1x-to-version-3"></a>Съображения за надстройка – PSA версия 2.x или 1.x до версия 3.x
[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

## <a name="project-service-automation-and-field-service"></a>Project Service Automation и Field Service
Dynamics 365 Project Service Automation и Dynamics 365 Field Service използват решението Universal Resourcing Scheduling (URS) за планиране на ресурси. Ако имате Project Service Automation и Field Service в екземпляра си, трябва да планирате надстройка на двете решения до най-новата версия (version 3.x за Project Service Automation, версия 8.x за Field Service). Надстройването на Project Service Automation или на Field Service ще инсталира най-новата версия на URS, което означава, че е възможно противоречиво поведение, ако не са надстроени до най-новата версия и двете решения Project Service Automation и Field Service.

## <a name="resource-assignments"></a>Присвоявания на ресурси
В Project Service Automation, версия 2 и версия 1 присвояванията на задачи се съхраняваха като дъщерни задачи (наричани още линейни задачи) в обекта **Задача** и косвено свързани с обекта **Присвояване на ресурс**. Линейната задача беше видима в изскачащия прозорец за присвояване в съставната структура на работата (ССР).

![Линейни задачи на ССР в Project Service Automation, версия 2 и версия 1](media/upgrade-line-task-01.png)

Във версия 3 на Project Service Automation основната схема за присвояване на налични ресурси на задачи се е променила. Линейната задача е отхвърлена и има директна релация 1:1 между задачата в обекта **Задача** и члена на екипа в обекта **Присвояване на ресурс**. Задачи, които са присвоени на член на екипа на проекта, сега се съхраняват директно в обекта „Присвояване на ресурс“.  

Тези промени влияят върху надстройването на всички съществуващи проекти, които имат присвоявания на ресурси за наименувани налични ресурси и общи ресурси в екип по проект. Тази тема предоставя съображенията, които ще трябва да вземете предвид за вашите проекти, когато надстроите до версия 3. 

### <a name="tasks-assigned-to-named-resources"></a>Задачи, присвоени на наименувани ресурси
С помощта на обекта на основната задача задачите във версия 2 и версия 1 позволяваха на членовете на екипа да изобразяват роля, различна от тяхната определена роля по подразбиране. Например Огняна Джурова, на която по подразбиране има присвоена роля на програмен мениджър, може да бъде присвоена на задача с ролята на разработчик. Във версия 3 ролята на наименуван член на екипа винаги е по подразбиране, така че всяка задача, към която е присвоена Огняна Джурова, използва нейната роля по подразбиране на програмния мениджър.

Ако сте присвоили ресурс на задача извън неговата роля по подразбиране във версия 2 и версия 1, когато надстроите, на наименувания ресурс ще бъде присвоена ролята по подразбиране за всички присвоявания на задачи, независимо от присвояването на роля във версия 2. Това ще доведе до разлики в изчислените прогнозни оценки от версия 2 или версия 1 спрямо версия 3, тъй като изчисленията се изчисляват въз основа на ролята на ресурса, а не на присвояването на линейна задача. Например във версия 2 са присвоени две задачи на Борислава Методиева. Ролята за линейната задача за задача 1 е разработчик, а за задача 2 – програмен мениджър. Борислава Методиева има роля по подразбиране програмен мениджър.

![Няколко роли, присвоени на един ресурс](media/upgrade-multiple-roles-02.png)

Тъй като ролите на разработчик и програмен мениджър се различават, прогнозните разходи и продажби са както следва:

![Прогнозни разходи за роли на ресурси](media/upggrade-cost-estimates-03.png)

![Прогнозни продажби за роли на ресурси](media/upgrade-sales-estimates-04.png)

Когато надстроите до версия 3, линейните задачи се заменят с присвоявания на ресурси за задачата на член на екипа на наличен ресурс. Присвояването ще използва ролята по подразбиране на наличния ресурс. В следващата графика Борислава Методиева, която има роля на програмен мениджър, е ресурсът.

![Присвоявания на ресурси](media/resource-assignment-v2-05.png)

Тъй като прогнозните оценки се базират на ролята по подразбиране за ресурса, прогнозните продажби и разходи може да се променят. Забележете, че в следващата графика вече не виждате ролята **Разработчик**, тъй като тя сега е поета от ролята по подразбиране на наличния ресурс.

![Прогнозни разходи за роли по подразбиране](media/resource-assignment-cost-estimate-06.png)
![Прогнозни продажби за роли по подразбиране](media/resource-assignment-sales-estimate-07.png)

След като надстройката завърши, можете да редактирате ролята на член на екипа да бъде различна от присвоена по подразбиране. Ако обаче промените ролята на члена на екипа, тя ще бъде променена във всички негови присвоени задачи, защото на членовете на екипа във версия 3 вече не е разрешено да им бъдат присвоявани по няколко роли.

![Актуализиране на роля на ресурс](media/resource-role-assignment-08.png)

Това важи и за линейните задачи, които бяха присвоявани на наименувани ресурси, когато променяте организационната единица на ресурса от по подразбиране на друга организационна единица. След завършване на надстройването на версия 3, присвояването ще използва организационната единица по подразбиране на ресурса вместо тази, зададена в линейната задача.

### <a name="tasks-assigned-to-generic-resources"></a>Задачи, присвоени на общи ресурси
Във версия 2 и версия 1 можехте да зададете ролята и организационната единица за задача и след това да използвате функцията **Генериране на екип** за генериране на общи ресурси въз основа на атрибутите, зададени за задачата. Във версия 3 създавате общи членове на екипа с роля и организационна единица и след това присвоявате членовете на екипа на задачи.

Във версия 2 и версия 1 проектите с общи ресурси можеха да бъдат в две състояния или в комбинация от двете на ниво задача. Например можете да имате следните сценарии:

- Задачи със зададени роли и организационни единици, но не е генерирано присвояване на свързан ресурс.
- Задачи с присвоявания на общ ресурс член на екипа, които бяха присвоявани чрез създаване на общ ресурс с помощта на функцията **Генериране на екип**.

Преди да започнете надстройката, ви препоръчваме да генерирате отново екипа за всеки проект, който има задачи, присвоени на общи ресурси, или все още трябва да генерира изпълнение на процеса на екипа за тях.

За задачи, които са присвоени на общи членове на екипа, генерирани с **Генериране на екип**, надстройката ще остави общия ресурс в екипа и ще остави присвояването на този общ член на екипа. Препоръчително е да генерирате изискването за ресурс за общия член на екипа след надстройването, но преди да резервирате или подадете заявка за ресурс. Това ще запази всяко присвояване на организационна единица за общи членове на екипа, които са различни от организационната единица, сключваща договора, на проекта.

Например в проекта Z организационната единица, сключваща договора, е Contoso САЩ. В плана на проекта задачите за тестване в рамките на фазата на изпълнение са присвоени на техническия консултант и присвоената организационна единица е Contoso Индия.

![Присвояване на организация във фаза на изпълнение](media/org-unit-assignment-09.png)

След фазата на изпълнение интеграционната задача за проверка се присвоява на ролята технически консултант, но организацията е зададена на Contoso САЩ.  

![Присвояване на организация на интеграционна задача за проверка](media/org-unit-generate-team-10.png)

Когато генерирате екип за проекта, два общи членове на екипа се създават поради различните организационни единици на задачите. На технически консултант 1 ще бъдат присвоени задачи от Contoso Индия, а на технически консултант 2 – задачи от Contoso САЩ.  

![Генерирани общи членове на екипа](media/org-unit-assignments-multiple-resources-11.png)

> [!NOTE]
> В Project Service Automation, версия 2 и версия 1 членът на екипа не съдържа организационната единица, която се поддържа в линейната задача.

![Линейни задачи на версия 2 и версия 1 в Project Service Automation](media/line-tasks-12.png)

Можете да видите организационната единица в изгледа на прогнозните оценки. 

![Прогнозни оценки на организационна единица](media/org-unit-estimates-view-13.png)
 
Когато надстройката завърши, организационната единица на линейната задача, която отговаря на общия член на екипа, се добавя към общия член на екипа и линейната задача се премахва. Поради това препоръчваме преди надстройване да генерирате или да генерирате отново екипа на всеки проект, който съдържа общи ресурси.

За задачи, които са присвоени на роля с организационна единица, която се различава от организационната единица на проекта за договаряне, и екипът не е генериран, надстройката ще създаде общ член на екипа за ролята, но ще използва единицата, сключваща договора, на проекта за организационна единица на члена на екипа. Позовавайки се на примера с проект Z, това означава, че организационната единица, сключваща договора, Contoso САЩ и тестовите задачи на плана на проекта в рамките на фазата на изпълнение имат присвоена роля на техническия консултант и организационната единица е присвоена на Contoso Индия. Тестовата задача за интеграция, завършена след фазата на изпълнение, е присвоена на ролята технически консултант. Организационната единица е Contoso САЩ и екипът не е генериран. Надстройката ще създаде един общ член на екипа, технически консултант, който има присвоените часове на трите задачи, както и организационна единица на Contoso САЩ, организационната единица, сключваща договора на проекта.   
 
Промяната по подразбиране на различните ресурсни единици за негенерирани членове на екипа е причината да ви препоръчваме да генерирате или да генерирате отново екипа за всеки проект, който съдържа общи ресурси, преди надстройването, така че присвояванията на организацията да не се загубят.

