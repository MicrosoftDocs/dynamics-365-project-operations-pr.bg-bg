---
title: Как да персонализирам потока на бизнес процес „Етапи на проект”?
description: Общ преглед на това как да персонализирате потока на бизнес процес „Етапи на проект”.
ms.custom:
- dyn365-projectservice
ms.date: 10/11/2018
ms.topic: article
author: JohnPBurrows
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: 7efbb19161878e13a1b0d33bc1bc4e06521445c0
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 04/14/2022
ms.locfileid: "8596957"
---
# <a name="how-do-i-customize-the-project-stages-business-process-flow"></a>Как да персонализирам потока на бизнес процес „Етапи на проект”?

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-2-4x-9-0-platform](../includes/cc-applies-to-psa-app-2-4x-9-0-platform.md)]
[!INCLUDE[cc-applies-to-psa-app-1x-8-2-platform](../includes/cc-applies-to-psa-app-1x-8-2-platform.md)]

Има известно ограничение в по-ранни версии на приложението Project Service, което изисква имената на етапите на потока на бизнес процес „Етапи на проект” трябва да съвпадат точно с очакваните английски имена (**Quote**, **Plan**, **Close**). В противен случай бизнес логиката, която разчита на английските имена на етапи, няма да работи според очакваното. Ето защо вие не виждате познати действия като **Превключване на процес** или **Редактиране на процес** налични във формуляра на проекта, освен това персонализирането на потока на бизнес процес не се насърчава. 

Това ограничение е било адресирано във версия 2.4.5.48 и по-нова. Тази статия предоставя предложени заобиколни решения, ако имате нужда да персонализирате потока на бизнес процес по подразбиране за по-ранни версии.  

## <a name="business-logic-requires-an-exact-match-with-english-stage-names"></a>Бизнес логиката изисква точно съвпадение с английските имена на етап

Потокът на бизнес процес „Етапи на проект” включва бизнес логика, която управлява следните поведения в приложението:
- Когато проектът е свързан с оферта, кодът задава потока на бизнес процес на етап **Quote**.
- Когато проектът е свързан с договор, кодът задава потока на бизнес процес на етап **Plan**.
- Когато потокът на бизнес процес е придвижен до етап **Close**, записът на проекта се дезактивира. Когато проектът е дезактивиран, формулярът на проекта и съставната структура на работата (WBS) се задават на състояние само за четене, именуваните резервации на ресурс се освобождават и всички свързани ценови листи се дезактивират.

Тази бизнес логика се основава на английските имена на етапи на проекта. Тази зависимост от английските имена на етапи е основната причина за това персонализирането на потока на бизнес процес на „Етапи на проект” да не се насърчава, както и за това да не виждате обикновени действия на потока на бизнес процес, като **Превключване на процес** или **Редактиране на процес** в обекта на проекта.

## <a name="what-happens-if-the-stage-names-dont-match-the-english-names"></a>Какво става, ако имената на етап не съвпадат с английските имена?

В приложението Project Service, версия 1.x на платформата 8.2, когато имената на етапи в потока на бизнес процес не отговарят точно на английските имена на етап, бизнес логиката, която задава правилния етап за оферта или договор, или такава, която затваря проект, се пропуска. Съобщения за грешки не се показват. По тази причина изглежда, че можете да персонализирате потока на бизнес процес „Етапи на проект”. Няма да видите обаче никой от автоматичните процеси да работи за оферти, договори и затваряне на проект.

В приложението Project Service, версия 2.4.4.30 или по-стара на платформа 9.0 има значителна архитектурна промяна на потока на бизнес процес, която изисква пренаписване на бизнес логиката на потока на бизнес процес. В резултат на това, ако имената на етап от процеса не съответстват на очакваните английски имена, ще получите съобщение за грешка. 

По тази причина, ако искате да персонализирате потока на бизнес процес „Етапи на проект” за обекта на проекта, можете само да добавите напълно нови етапи към потока на бизнес процес по подразбиране за обекта на проект, като запазите етапите **Quote**, **Plan** и **Close**, както са си. Това ограничение гарантира, че няма да получите грешки от бизнес логиката, която очаква английски имена на етап в потока на бизнес процес.

Във версия 2.4.5.48 или по-нова бизнес логиката, описана в тази статия, е премахната от потока на бизнес процес по подразбиране за обекта на проекта. Надстройката до тази версия или по-нова ще ви позволи да персонализирате или подмените потока на бизнес процес по подразбиране с ваш такъв. 

## <a name="workarounds-for-earlier-versions"></a>Заобиколни решения за по-ранни версии

Ако надстройката не е опция, можете да персонализирате потока на бизнес процес „Етапи на проект” за обекта на проекта по един от следните начини:

1. Добавете допълнителни етапи към конфигурацията по подразбиране, като запазите английските имена на етап за **Quote**, **Plan** и **Close**.


![Екранна снимка на добавянето на етапи към конфигурацията по подразбиране.](media/FAQ-Customize-BPF-1.png)
 
2. Създайте свой собствен поток на бизнес процес и го направете основен поток на бизнес процес за обекта на проекта, което ще ви позволи да имате всяко желано име на етап. Ако обаче искате да използвате същите стандартни етапи на проект **Quote**, **Plan** и **Close**, трябва да направите някои персонализации, които са предизвикани от вашите персонализирани имена на етапи. По-сложната логика е в затварянето на проекта, което все още можете да задействате, като просто дезактивирате записа на проекта.

![Персонализиране на BPF.](media/FAQ-Customize-BPF-2.png)

### <a name="additional-considerations-for-project-service-app-version-24430-or-earlier-on-platform-90"></a>Допълнителни съображения за приложение Project Service, версия 2.4.4.30 или по-нова на платформа 9.0

В Project Service, версия 2.4.4.30 или по-нова на платформа 9.0 при персонализиран поток на бизнес процес полето **Име на етап** в обекта на проект, използвано в диаграмата **Проект по етап** и изгледите на списък на проекта, няма да се актуализира, защото е сдвоено с потока на бизнес процес „Етапи на проект”. Можете да решите този проблем чрез следните стъпки:

- Добавете персонализирано поле, за да уловите текущия етап на поток на бизнес процес, който се актуализира, докато потребителят преминава през персонализирания поток на бизнес процес.

- Променете диаграмата **Проект по етап**, за да работи с персонализираното ви поле вместо конфигурацията по подразбиране.

### <a name="steps-to-create-your-own-business-process-flow-for-the-project-entity"></a>Стъпки за създаване на собствен поток на бизнес процес за обекта на процеса

За да създадете свой собствен поток на бизнес процес за обекта на проекта, направете следното:

1. Отидете в **Настройки** > **Център за процеси**. Не копирайте потока на бизнес процес „Етапи на проект”, защото това ще копира и бизнес логиката на Project Service.

  ![Създаване на процес.](media/FAQ-Customize-BPF-3.png)

2. Използвайте дизайнера на процеси, за да създадете желаните имена на етапи. Ако искате същата функционалност като етапите по подразбиране за **Оферта**, **План** и **Затваряне**, ще трябва да я създадете според вашите персонализирани имена на етапи на поток на бизнес процес.

   ![Екранна снимка на дизайнера на процеси, използван за персонализиране на BPF.](media/FAQ-Customize-BPF-4.png) 

3. В дизайнера на процеси щракнете върху **Подреждане на поток на процес**, за да направите персонализирания поток на бизнес процес основен поток на бизнес процес за обекта на проекта, като го преместите над потока на бизнес процес „Етапи на проект” в горната част на списъка.


   [Екранна снимка на използване на подреждане на поток на процес](media/FAQ-Customize-BPF-5-720.png)

### <a name="the-following-steps-apply-to-project-service-app-24430-or-earlier-on-the-90-platform"></a>Следващите стъпки се прилагат за приложението Project Service, версия 2.4.4.30 или по-стара на платформа 9.0

4. Добавете ново потребителско поле към обекта на проекта, за да уловите персонализираните етапи във вашия персонализиран поток на бизнес процес. Ще трябва да добавите бизнес логика (добавка/работен процес), за да актуализирате това поле, когато етапът на персонализирания поток на бизнес процес се актуализира.

   ![Екранна снимка на персонализиране на обекта на проекта.](media/FAQ-Customize-BPF-6-720.png)

5. Променете диаграмата **Проект по етап**, за да използвате своето ново персонализирано поле за етапи.

   ![Екранна снимка на използването на диаграмата „Проект по етап”.](media/FAQ-Customize-BPF-7-720.png)

6. Променете всички изгледи за обекта на проекта, за да включите своето ново персонализирано поле за етапи.

   ![Екранна снимка на промяната на изгледи в обекта на проекта.](media/FAQ-Customize-BPF-8-720.png)



[!INCLUDE[footer-include](../includes/footer-banner.md)]
