---
title: Надстройка от Project Service Automation до Project Operations
description: Тази статия предоставя преглед на процеса за надграждане от Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Project Operations.
author: ruhercul
ms.custom: dyn365-projectservice
ms.date: 10/11/2022
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: 2d7b372cac391fab7a81ac6ac5d2ea6d12977b5c
ms.sourcegitcommit: 9de444ae0460c8d15c77d225d0c0ad7f8445d5fc
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 10/18/2022
ms.locfileid: "9686962"
---
# <a name="upgrade-from-project-service-automation-to-project-operations"></a>Надстройка от Project Service Automation до Project Operations

Ние сме развълнувани да обявим втората от трите фази за надграждане от Microsoft Dynamics 365 Project Service Automation Microsoft Dynamics 365 Project Operations. Тази статия предоставя преглед за клиентите, които се впускат в това вълнуващо пътуване. 

Програмата за доставка на ъпгрейд ще бъде разделена на три фази.

| Ъпгрейд доставка | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022) | Фаза 3 (Априлска вълна 2023)  |
|------------------|------------------------|---------------------------|---------------------------|
| Няма зависимост от структурата на разбивка на работата (WBS) за проекти | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| WBS в рамките на поддържаните понастоящем граници на операциите по проекта | | :heavy_check_mark: | :heavy_check_mark: |
| WBS извън поддържаните понастоящем лимити на операциите по проекти, включително поддръжка за десктоп клиента на проекта | | | :heavy_check_mark: |

## <a name="upgrade-process-features"></a>Функции на процеса на надстройка 

Като част от процеса на надстройване, добавихме регистрационни файлове за надстройка към картата на сайта, за да дадем възможност на администраторите по-лесно да диагностицират неизправности. В допълнение към новия интерфейс ще бъдат добавени нови правила за валидиране, за да се гарантира целостта на данните след надстройка. Следните валидирания ще бъдат добавени към процеса на надстройване.

| Потвърждаване | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022) | Фаза 3  |
|-------------|------------------------|---------------------------|---------------------------|
| WBS ще бъде валидирана срещу общи нарушения на целостта на данните (например задания на ресурси, които са свързани с една и съща родителска задача, но имат различни родителски проекти). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо [известните граници на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо известните граници на десктоп клиента на проекта. | |  | :heavy_check_mark: |
| Резервираните ресурси и календарите на проектите ще бъдат оценявани спрямо общи несъвместими изключения от календарните правила. | | :heavy_check_mark: | :heavy_check_mark: |

Във фаза 2 клиентите, които надграждат до Project Operations, ще модернизират съществуващите си проекти до преживяване само за четене за планиране на проекти. В това преживяване само за четене пълният WBS ще бъде видим в мрежата за проследяване. За да редактирате WBS, ръководителите на проекти могат да изберат [**Конвертиране**](/PSA-Upgrade-Project-Conversion.md) на главната страница на проекта. След това фоновият процес актуализира проекта, така че да поддържа новия опит в планирането на проекта от Project for the Web. Тази фаза е подходяща за клиенти, които имат проекти, които се вписват в [известните граници на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries).

Във фаза 3 ще бъде добавена поддръжка за настолния клиент на проекта в полза на клиентите, които искат да продължат да редактират проектите си от това приложение. Ако обаче съществуващите проекти бъдат преобразувани в новия проект за уеб изживяване, достъпът до добавката ще бъде деактивиран за всеки преобразуван проект.

## <a name="prerequisites"></a>Предварителни изисквания

За да отговаряте на условията за надстройка фаза 1, трябва да отговаряте на следните критерии:

- Целевата среда не трябва да съдържа записи в **msdyn_projecttask** субект.
- Валидните лицензи за операции по проекти трябва да бъдат присвоени на всички активни потребители. 
- Трябва да валидирате процеса на надстройка в поне една непроизводствена среда, която съдържа представителен набор от данни, който е в съответствие с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до актуализация на актуализацията на автоматизацията на проекти 37 (V3.10.58.120) или по-нова.

За да отговаряте на условията за надстройка фаза 2, трябва да отговаряте на следните критерии:

- Валидните лицензи за операции по проекти трябва да бъдат присвоени на всички активни потребители. 
- Трябва да валидирате процеса на надстройка в поне една непроизводствена среда, която съдържа представителен набор от данни, който е в съответствие с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до актуализация на актуализацията на автоматизацията на проекти 37 (V3.10.58.120) или по-нова.
- Средите, които съдържат задачи (msdyn_projecttask), се поддържат само ако общият брой задачи на проект е 500 или по-малко.

Предпоставките за фаза 3 ще бъдат актуализирани с наближаването на общата дата на достъпност.

## <a name="licensing"></a>Лицензиране

Ако имате активни лицензи за автоматизация на проектни услуги, можете да инсталирате и използвате проектни операции, които включват всички възможности на автоматизацията на проектните услуги и др. След това можете да тествате възможностите на операциите по проекти в отделна среда, докато продължавате да използвате автоматизацията на проектните услуги в производството. След изтичане на лицензите за автоматизация на проектните услуги, ще трябва да преминете към операции по проекта. Когато планирате този преход, трябва да отчетете факта, че лицензът за операции по проекта не включва лиценз за автоматизация на проектни услуги.

## <a name="testing-and-refactoring-customizations"></a>Тестване и рефакторинг персонализации

Като отправна точка импортирайте всички персонализации в чиста среда за операции по проекти (Lite), за да потвърдите, че вносът е успешен и че бизнес операциите се държат според очакванията.

Ето някои неща, за които трябва да внимавате:

- Вносът може да се провали поради липсващи зависимости. С други думи, референтните полета за персонализация или други компоненти, които са били премахнати в операциите по проекти. В този случай премахнете тези зависимости от средата за развитие.
- Ако вашите неуправлявани и управлявани решения включват компоненти, които не са персонализирани, премахнете тези компоненти от решението. Например, когато персонализирате **предприятието на проекта**, добавете само заглавката на предприятието към вашето решение. Не добавяйте всички полета. Ако преди това сте добавили всички подкомпоненти, може да се наложи ръчно да създадете ново решение и да добавите съответните компоненти към него.
- Формите и мненията може да не се появят според очакванията. При някои обстоятелства, ако сте персонализирали някой от формулярите или изгледите извън кутията, персонализациите могат да попречат на новите актуализации в операциите по проекти да влязат в сила. За да идентифицирате тези проблеми, ви препоръчваме да направите един до друг преглед на чистата инсталация на операциите по проекта и инсталирането на операции по проекти, която включва вашите персонализации. Сравнете най-често използваните формуляри във вашия бизнес, за да потвърдите, че вашата версия на формуляра все още има смисъл и не пропуска нещо от чистата версия на формуляра. Направете същия тип преглед един до друг за всички изгледи, които сте персонализирали.
- Бизнес логиката може да се провали по време на изпълнение. Тъй като препратките към полета във вашите плъгини не са валидирани по време на импортирането, бизнес логиката може да се провали поради препратки към полета, които вече не съществуват, и може да получите съобщение за грешка, което прилича на следния пример: "Предприятието "Проект" не съдържа атрибут с Име = "msdyn_plannedhours" и Имекартографиране = "Логично". В този случай променете вашите персонализации, така че да използват новите полета. Ако използвате автоматично генерирани прокси класове и силни препратки към типа във вашата логика на плъгин, помислете за регенериране на тези пълномощници от чиста инсталация. По този начин можете лесно да идентифицирате всички места, където вашите плъгини зависят от отхвърлените полета.

След като актуализирате персонализациите си, за да импортирате чисто операциите по проекти, преминете към следващите стъпки.

## <a name="end-to-end-testing-in-development-environments"></a>Тестване от край до край в среда за разработка

### <a name="initiate-upgrade"></a>Иницииране на ъпгрейд 

1. В центъра за Power Platform администриране намерете и изберете вашата среда. След това, в приложенията, намерете и изберете **Dynamics 365 Project Operations**.
2. Изберете **Инсталиране**, за да започнете надстройката. Админ Power Platform центърът ще представи тази инсталация като нова инсталация. Въпреки това, ще бъде открито наличието на по-ранна версия на автоматизацията на проектните услуги, а съществуващата инсталация ще бъде модернизирана.

    След като надстройката приключи, околната среда трябва да покаже, че операциите по проекта са инсталирани и че автоматизацията на услугата за проекти не е инсталирана.

    В зависимост от количеството данни в околната среда, надстройката може да отнеме няколко часа. Основният екип, който управлява надстройката, трябва да планира съответно и да стартира надстройката в неработно време. В някои случаи, ако обемът на данните е голям, надстройката трябва да се изпълнява през уикенда. Решението за планиране трябва да се основава на резултатите от изпитванията в по-ниска среда.

3. Надстройте персонализирани решения, според случая. В този момент разгърнете всички промени, които сте направили във вашите персонализации в [секцията Тестване и рефакторинг персонализации](#testing-and-refactoring-customizations) на тази статия.
4. Отидете на решения **за настройки** \> **и изберете да деинсталирате решението за отхвърлени компоненти** на **проектните** операции.

    Това решение е временно решение, което държи съществуващия модел на данни и компоненти, които присъстват по време на надстройката. Премахвайки това решение, премахвате всички полета и компоненти, които вече не се използват. По този начин можете да опростите интерфейса и да направите интеграцията и разширението по-лесни.
    
### <a name="upgrade-to-project-operations-lite"></a>Надстройка до проектни операции lite

Следните стъпки описват процеса на надстройка и свързаното с него регистриране на грешки:

1. **PSA Version check:** За да инсталирате операциите по проекта, трябва да имате V3.10.58.120 или по-висока.
1. **Предварително валидиране:** Когато администратор инициира надстройка, системата изпълнява операция за предварително валидиране на всяко предприятие, което е в основата на решението за операции по проекти. Тази стъпка проверява дали всички препратки към субекти са валидни и гарантира, че данните, които са свързани с WBS, са в публикуваните граници на Project for the Web.
1. **Надстройка на метаданни:** След успешно предварително валидиране, системата инициира промени в схемата и създава решение за отхвърлени компоненти. Можете да премахнете това отхвърлено решение, след като сте завършили всички необходими рефакторинг на персонализациите. Тази стъпка е най-дългата част от процеса на надграждане и може да отнеме до четири часа, за да бъде завършена.
1. **Надстройка на данни:** След като всички необходими промени в схемата са завършени в стъпката за надграждане на метаданните, вашите данни се мигрират към новата схема и се извършват всички необходими по подразбиране и преизчисляване.
1. **Актуализация на двигателя на графика на проекта:** След успешно надграждане на данните, разделът График **на** главната страница се преетикетира **Задачи**. Когато потребителят избере този раздел след надстройката, те са насочени към навигацията към мрежата за проследяване, за да видите версия само за четене на WBS. За да редактират WBS, те трябва да инициират процеса [на преобразуване на графика](/PSA-Upgrade-Project-Conversion.md). Всички проекти без предварително съществуваща WBS могат да използват новия опит в планирането директно, без преобразуване.
 
### <a name="validate-common-scenarios"></a>Валидиране на общи сценарии

Когато валидирате вашите специфични персонализации, препоръчваме ви също да прегледате бизнес процесите, които се поддържат в приложенията. Тези бизнес процеси включват, но не се ограничават до, създаването на търговски субекти като котировки и договори, както и създаването на проекти, които включват WBS и одобрение на действителни.

## <a name="major-changes-between-project-service-automation-and-project-operations"></a>Основни промени между автоматизацията на проектните услуги и операциите по проекта

Този раздел предоставя обобщение на основните промени, които можете да очаквате между автоматизацията на проектните услуги и операциите по проекта.

### <a name="project-planning"></a>Планиране на проект

Възможностите за планиране на проекти в Project Operations вече не разчитат на комбинирана логика от страна на клиента и логика от страна на сървъра. Вместо това, Project Operations използва Project за мрежата, тъй като е двигател за планиране. Тази промяна в възможностите за планиране позволява няколко нови функции, като изгледи на борда и Гант, планиране на ресурсите, [елементи](https://support.microsoft.com/office/use-task-checklists-in-microsoft-project-for-the-web-c69bcf73-5c75-4ad3-9893-6d6f92360e9c) от контролния списък на задачите и режими на планиране на проекти. Новите възможности за планиране също се поддържат от богат набор от нови [интерфейси за програмиране на приложения (APIs](../project-management/schedule-api-preview.md)). Тези API са предназначени да помогнат да се гарантира, че никоя програмна операция за създаване, актуализиране или изтриване на предприятие в WBS не корумпира изчислените полета в графика.

### <a name="billing-and-pricing"></a>Фактуриране и ценообразуване

Като част от продължаващите инвестиции в проектни операции, няколко нови възможности са на разположение в фактурирането и ценообразуването. Ето някои примери:

- [Записване на използването на материали по проекти и задачи по проекта](../material/material-usage-log.md)
- [Управление на подизпълнители](../pro/subcontracting/managing-subcontracts-overview.md)
- [Базирани на авансови плащания и капаро договори](../pro/sales/set-up-advances-retainer-based-contracts-sales.md)
- [Договор, който не надвишава статуса и валидирането](../pro/proforma-invoicing/manage-nte-status-validations-sales.md)
- Фактуриране, базирано на задачи

### <a name="resource-management"></a>Управление на ресурси

Операциите по проекта осигуряват незадължителна поддръжка за борда (Universal Resource Scheduling URS) и асистента по планиране. Това ново преживяване ще стане задължително през вълната от април 2023 г.

## <a name="frequently-asked-questions"></a>Често задавани въпроси

### <a name="which-deployment-types-are-currently-supported-for-upgrade"></a>Кои типове внедряване в момента се поддържат за надстройка?

| Източник                                                 | Цел                                                    | Статус                  |
|--------------------------------------------------------|-----------------------------------------------------------|-------------------------|
| Project Service Automation                             | Проектни операции Lite внедряване                        | Поддържани               |
| Dynamics 365 Finance Управление и счетоводство на проекти | Проектни операции Lite внедряване                        | В момента не се поддържа |
| Финанси Управление на проекти и счетоводство              | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Автоматизация на проектни услуги 3.x                         | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Проект за интернет (специализирана среда)            | Проектни операции Lite внедряване                        | В момента не се поддържа |

### <a name="how-can-i-install-project-operations-before-the-upgrade-tooling-is-available"></a>Как мога да инсталирам Project Operations преди да е налична инструментална екипировка за надстройка?

Има две опции за инсталиране на Project Operations преди да е налична инструментална екипировка за надстройване:

- Осигуряване на нова среда.
- Разгърнете операциите по проекта поотделно на всяка организация за продажби, където автоматизацията на услугите на проекта не е налице.

Ако автоматизацията на проектните услуги е инсталирана на организация, но не е била използвана, тя може да бъде деинсталирана. След като напълно премахнете автоматизацията на проектните услуги, операциите по проекти могат да бъдат инсталирани на една и съща организация.
