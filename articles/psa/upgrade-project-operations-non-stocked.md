---
title: Надстройка от Project Service Automation до Project Operations
description: Тази статия предоставя общ преглед на процеса на надстройване от Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Project Operations.
author: ruhercul
ms.custom: dyn365-projectservice
ms.date: 10/11/2022
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: 06a4de89be8176049d3a14a8c0d6427e228744ba
ms.sourcegitcommit: 73aff2b3c5e5b8a2254735b0b25931cbb6754c87
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 10/20/2022
ms.locfileid: "9709431"
---
# <a name="upgrade-from-project-service-automation-to-project-operations"></a>Надстройка от Project Service Automation до Project Operations

Радваме се да обявим втората от трите фази за надграждане от Microsoft Dynamics 365 Project Service Automation към Microsoft Dynamics 365 Project Operations. Тази статия предоставя общ преглед за клиентите, които се впускат в това вълнуващо пътешествие. 

Програмата за доставка на надстройката ще бъде разделена на три фази.

| Доставка на надстройка | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022 г.) | Фаза 3 (априлска вълна 2023)  |
|------------------|------------------------|---------------------------|---------------------------|
| Няма зависимост от структурата на разбивката на работата (WBS) за проекти | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| WBS в рамките на поддържаните понастоящем граници на операциите по проекта | | :heavy_check_mark: | :heavy_check_mark: |
| WBS извън текущо поддържаните граници на операциите по проекта, включително поддръжка за настолния клиент на Project | | | :heavy_check_mark: |

## <a name="upgrade-process-features"></a>Функции на процеса на надстройване 

Като част от процеса на надстройване добавихме регистрационни файлове за надстройване към картата на сайта, за да позволим на администраторите по-лесно да диагностицират неуспехите. В допълнение към новия интерфейс ще бъдат добавени нови правила за валидиране, за да се гарантира целостта на данните след надстройка. Следните валидирания ще бъдат добавени към процеса на надстройка.

| Потвърждаване | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022 г.) | Фаза 3  |
|-------------|------------------------|---------------------------|---------------------------|
| WBS ще бъде валидиран срещу често срещани нарушения на целостта на данните (например присвояване на ресурси, които са свързани с една и съща родителска задача, но имат различни родителски проекти). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо [известните граници на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо известните ограничения на десктоп клиента на проекта. | |  | :heavy_check_mark: |
| Резервираните ресурси и календарите на проектите ще бъдат оценени спрямо често срещани несъвместими изключения от календарни правила. | | :heavy_check_mark: | :heavy_check_mark: |

Във фаза 2 клиентите, които надстроят до Project Operations, ще надстроят своите съществуващи проекти до опит само за четене за планиране на проекти. В това преживяване само за четене, пълният WBS ще бъде видим в мрежата за проследяване. За да редактирате WBS, ръководителите на проекти могат да изберат [**Конвертиране**](/PSA-Upgrade-Project-Conversion.md) на главната страница на проекта. След това фонов процес актуализира проекта, така че да поддържа новия опит за планиране на проекти от Project for the Web. Тази фаза е подходяща за клиенти, които имат проекти, които се вписват в рамките на [известните граници на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries).

Във фаза 3 ще бъде добавена поддръжка за настолния клиент на Project в полза на клиентите, които искат да продължат да редактират проектите си от това приложение. Ако обаче съществуващи проекти се конвертират в новия проект за уеб средата, достъпът до добавката ще бъде забранен за всеки конвертиран проект.

## <a name="prerequisites"></a>Предварителни изисквания

За да отговаряте на условията за надстройка на фаза 1, трябва да отговаряте на следните критерии:

- Целевата среда не трябва да съдържа никакви записи в **msdyn_projecttask** обект.
- Валидни лицензи за операции по проекти трябва да бъдат присвоени на всички активни потребители. 
- Трябва да проверите процеса на надстройка в поне една непроизводствена среда, която съдържа представителен набор от данни, който е подравнен с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до Project Service Automation Update Release 37 (V 3.10.58.120) или по-нова.

За да отговаряте на условията за надстройка на Фаза 2, трябва да отговаряте на следните критерии:

- Валидни лицензи за операции по проекти трябва да бъдат присвоени на всички активни потребители. 
- Трябва да проверите процеса на надстройка в поне една непроизводствена среда, която съдържа представителен набор от данни, който е подравнен с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до Project Service Automation Update Release 37 (V 3.10.58.120) или по-нова.
- Среди, които съдържат задачи (msdyn_projecttask), се поддържат само ако общият брой задачи на проект е 500 или по-малко.

Предпоставките за Фаза 3 ще бъдат актуализирани с наближаването на общата дата на наличност.

## <a name="licensing"></a>Лицензиране

Ако имате активни лицензи за автоматизация на проектни услуги, можете да инсталирате и използвате Project Operations, която включва всички възможности на Project Service Automation и др. По този начин можете да тествате възможностите на Project Operations, докато продължавате да използвате Project Service Automation в производството. След като лицензите ви за автоматизация на проектни услуги изтекат, ще трябва да преминете към операции по проекта. Когато планирате този преход, трябва да вземете предвид факта, че лицензът за операции по проекта не включва лиценз за автоматизация на проектни услуги. Клиентите, които имат сценарии, при които са внедрили Project Service Automation и трябва да продължат да използват или увеличават лицензите си за PSA, докато планират да се преместят в Project Operations, могат да поискат временни лицензи за PSA въз основа на закупени лицензи за проектни операции. Един лиценз за автоматизация на проектни услуги ще бъде издаден за един лиценз за операции по проекта. Временни лицензи за PSA могат да бъдат поискани чрез използване на тази връзка: aka.ms/ineedpsa

## <a name="testing-and-refactoring-customizations"></a>Тестване и рефакторинг персонализации

Като отправна точка импортирайте всички персонализации в чиста среда за операции по проекти (Lite), за да потвърдите, че импортирането е успешно и че бизнес операциите се държат според очакванията.

Ето някои неща, за които да внимавате:

- Импортирането може да се провали поради липсващи зависимости. С други думи, референтните полета за персонализации или други компоненти, които са били премахнати в операциите по проекта. В този случай премахнете тези зависимости от средата за развитие.
- Ако вашите неуправлявани и управлявани решения включват компоненти, които не са персонализирани, премахнете тези компоненти от решението. Например, когато персонализирате обекта на проекта **, добавете само заглавката на** обекта към вашето решение. Не добавяйте всички полета. Ако преди това сте добавили всички подкомпоненти, може да се наложи ръчно да създадете ново решение и да добавите съответните компоненти към него.
- Формулярите и изгледите може да не се показват според очакванията. При някои обстоятелства, ако сте персонализирали някой от готовите формуляри или изгледи, персонализирането може да попречи на новите актуализации в операциите по проекта да влязат в сила. За да идентифицирате тези проблеми, препоръчваме ви да направите паралелен преглед на чиста инсталация на операции по проекта и инсталация на операции по проекта, която включва вашите персонализации. Сравнете най-често използваните формуляри във вашия бизнес, за да потвърдите, че вашата версия на формуляра все още има смисъл и не пропуска нищо от чистата версия на формуляра. Направете същия тип преглед един до друг за всички изгледи, които сте персонализирали.
- Бизнес логиката може да се провали по време на изпълнение. Тъй като препратките към полета във вашите добавки не са проверени по време на импортирането, бизнес логиката може да е неуспешна поради препратки към полета, които вече не съществуват, и може да получите съобщение за грешка, което прилича на следния пример: "Обектът 'Проект' не съдържа атрибут с Name = 'msdyn_plannedhours' и NameMapping = 'Logical'." В този случай променете вашите персонализации, така че да използват новите полета. Ако използвате автоматично генерирани прокси класове и силни препратки към типове в логиката на приставката, помислете за регенериране на тези прокси сървъри от чиста инсталация. По този начин можете лесно да идентифицирате всички места, където вашите плъгини зависят от отхвърлени полета.

След като актуализирате персонализациите си, за да импортирате чисто операциите по проекта, преминете към следващите стъпки.

## <a name="end-to-end-testing-in-development-environments"></a>Тестване от край до край в среди за разработка

### <a name="initiate-upgrade"></a>Иницииране на надстройка 

1. В центъра за Power Platform администриране намерете и изберете вашата среда. След това в приложенията намерете и изберете **Dynamics 365 Project Operations**.
2. Изберете **Инсталиране**, за да стартирате надстройката. Центърът Power Platform за администриране ще представи тази инсталация като нова инсталация. Ще бъде открито обаче наличието на по-ранна версия на Project Service Automation и съществуващата инсталация ще бъде надградена.

    След като надстройката приключи, средата трябва да покаже, че операциите по проекта са инсталирани и че автоматизацията на услугата за проекти не е инсталирана.

    В зависимост от количеството данни в околната среда, надстройката може да отнеме няколко часа. Основният екип, който управлява надстройката, трябва да планира съответно и да изпълни надстройката в извънработно време. В някои случаи, ако обемът на данните е голям, надстройката трябва да се извърши през уикенда. Решението за планиране трябва да се основава на резултатите от тестовете в по-ниска среда.

3. Надстройте персонализирани решения, както е подходящо. В този момент разположете всички промени, които сте направили във вашите персонализации, в [раздела Тестване и рефакториране на персонализации](#testing-and-refactoring-customizations) на тази статия.
4. Отидете на Решения **за настройки** \> **и изберете, за да деинсталирате решението за отхвърлени компоненти** на операции на **проекта**.

    Това решение е временно решение, което съдържа съществуващия модел на данни и компонентите, които присъстват по време на надстройката. Премахвайки това решение, премахвате всички полета и компоненти, които вече не се използват. По този начин помагате за опростяване на интерфейса и улеснявате интеграцията и разширението.
    
### <a name="upgrade-to-project-operations-lite"></a>Надстройте до Операции по проекта Lite

Следващите стъпки описват процеса на надстройване и свързаното с него регистриране на грешки:

1. **Проверка на версията на PSA:** За да инсталирате Project Operations, трябва да имате V3.10.58.120 или по-нова версия.
1. **Предварителна проверка:** Когато администратор инициира надстройка, системата изпълнява операция за предварителна проверка на всеки обект, който е основен за решението за операции по проекта. Тази стъпка проверява дали всички препратки към обекти са валидни и гарантира, че данните, които са свързани с WBS, са в публикуваните граници на Project for the Web.
1. **Надстройка на метаданните:** След успешна предварителна проверка, системата инициира промени в схемата и създава отхвърлено решение за компоненти. Можете да премахнете това отхвърлено решение, след като завършите всички необходими рефакторинг на персонализациите. Тази стъпка е най-дългата част от процеса на надграждане и може да отнеме до четири часа, за да бъде завършена.
1. **Надстройка на данните:** След като всички необходими промени в схемата са завършени в стъпката за надстройка на метаданните, вашите данни се мигрират към новата схема и се извършват всички необходими настройки по подразбиране и преизчисляване.
1. **Актуализация на двигателя на графика на проекта:** След успешно надстройване на данните, разделът График **на главната страница се преименува** на **Задачи**. Когато потребителят избере този раздел след надстройката, той трябва да навигира до мрежата за проследяване, за да види версия само за четене на WBS. За да редактират WBS, те трябва да започнат процеса [на конвертиране на графика](/PSA-Upgrade-Project-Conversion.md). Всички проекти без предварително съществуващ WBS могат да използват новия опит за планиране директно, без преобразуване.
 
### <a name="validate-common-scenarios"></a>Валидиране на общи сценарии

Когато валидирате вашите конкретни персонализации, препоръчваме да прегледате и бизнес процесите, които се поддържат в приложенията. Тези бизнес процеси включват, но не се ограничават до създаването на търговски обекти като котировки и договори, както и създаването на проекти, които включват WBS и одобрение на действителни.

## <a name="major-changes-between-project-service-automation-and-project-operations"></a>Основни промени между автоматизацията на проектните услуги и операциите по проекта

Този раздел предоставя обобщение на основните промени, които можете да очаквате между автоматизацията на услугите за проекти и операциите по проекти.

### <a name="project-planning"></a>Планиране на проект

Възможностите за планиране на проекти в проектните операции вече не разчитат на комбинация от логика от страна на клиента и логика от страна на сървъра. Вместо това Project Operations използва Project for the Web като двигател за планиране. Тази промяна във възможностите за планиране позволява няколко нови функции, като например изгледи на борда и Гант, планиране, основано на ресурси, [елементи](https://support.microsoft.com/office/use-task-checklists-in-microsoft-project-for-the-web-c69bcf73-5c75-4ad3-9893-6d6f92360e9c) от контролни списъци със задачи и режими на планиране на проекти. Новите възможности за планиране се поддържат и от богат набор от нови [интерфейси за програмиране на приложения (API).](../project-management/schedule-api-preview.md) Тези API са предназначени да помогнат да се гарантира, че никоя програмна операция за създаване, актуализиране или изтриване на обект в WBS не поврежда изчислените полета в графика.

### <a name="billing-and-pricing"></a>Фактуриране и ценообразуване

Като част от продължаващите инвестиции в проектни операции, няколко нови възможности са на разположение в фактурирането и ценообразуването. Ето някои примери:

- [Записване на използването на материали по проекти и задачи от проекти](../material/material-usage-log.md)
- [Управление на договори за подизпълнение](../pro/subcontracting/managing-subcontracts-overview.md)
- [Базирани на авансови плащания и капаро договори](../pro/sales/set-up-advances-retainer-based-contracts-sales.md)
- [Договор, който не надвишава статуса и заверките](../pro/proforma-invoicing/manage-nte-status-validations-sales.md)
- Фактуриране, базирано на задачи

### <a name="resource-management"></a>Управление на ресурси

Операциите по проекта осигуряват незадължителна поддръжка за Universal Resource Scheduling борда (URS) и асистента за планиране. Това ново преживяване ще стане задължително във вълната от април 2023 година.

## <a name="frequently-asked-questions"></a>Често задавани въпроси

### <a name="which-deployment-types-are-currently-supported-for-upgrade"></a>Кои типове разполагане се поддържат в момента за надстройка?

| Източник                                                 | Цел                                                    | Статус                  |
|--------------------------------------------------------|-----------------------------------------------------------|-------------------------|
| Project Service Automation                             | Операции на проекта Lite Deployment                        | Поддържани               |
| Dynamics 365 Finance Управление на проекти и счетоводство | Операции на проекта Lite Deployment                        | В момента не се поддържа |
| Финанси Управление на проекти и счетоводство              | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Автоматизация на проектни услуги 3.x                         | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Проект за уеб (специална среда)            | Операции на проекта Lite Deployment                        | В момента не се поддържа |

### <a name="how-can-i-install-project-operations-before-the-upgrade-tooling-is-available"></a>Как мога да инсталирам Project Operations, преди да е налична инструменталната екипировка за надстройване?

Има две опции за инсталиране на операции по проекта, преди да е налична инструментална екипировка за надстройване:

- Създаване на нова среда.
- Разположете операциите по проекта отделно във всяка организация за продажби, където автоматизацията на проектните услуги не присъства.

Ако Project Service Automation е инсталирана в организация, но не е била използвана, тя може да бъде деинсталирана. След като премахнете напълно Project Service Automation, операциите по проекта могат да бъдат инсталирани в същата организация.
