---
title: Надстройка от Project Service Automation до Project Operations
description: Тази статия предоставя общ преглед на процеса за надграждане от Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Project Operations.
author: ruhercul
ms.custom: dyn365-projectservice
ms.date: 10/11/2022
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: ac2435c99f3aa9b2a6cdb08d7ce5f6628e7f6ac4
ms.sourcegitcommit: bea5f9b4066277344add1da3a1567ed56a0cfd31
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 11/02/2022
ms.locfileid: "9736653"
---
# <a name="upgrade-from-project-service-automation-to-project-operations"></a>Надстройка от Project Service Automation до Project Operations

Ние сме развълнувани да обявим втората от трите фази за надграждане от Microsoft Dynamics 365 Project Service Automation към Microsoft Dynamics 365 Project Operations. Тази статия предоставя общ преглед за клиентите, които се впускат в това вълнуващо пътешествие. 

Програмата за доставка на надстройка ще бъде разделена на три фази.

| Доставка на надграждане | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022 г.) | Фаза 3 (априлска вълна 2023 г.)  |
|------------------|------------------------|---------------------------|---------------------------|
| Няма зависимост от съставната структура на работата (WBS) за проекти | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| WBS в рамките на текущо поддържаните ограничения на Project Operations | | :heavy_check_mark: | :heavy_check_mark: |
| WBS извън поддържаните в момента ограничения на Project Operations, включително поддръжка за Project Desktop Client | | | :heavy_check_mark: |

## <a name="upgrade-process-features"></a>Функции на процеса на надстройка 

Като част от процеса на надграждане, ние добавихме регистрационни файлове за надграждане към картата на сайта, за да позволим на администраторите по-лесно да диагностицират грешки. В допълнение към новия интерфейс ще бъдат добавени нови правила за валидиране, за да се гарантира целостта на данните след надграждане. Следните проверки ще бъдат добавени към процеса на надстройка.

| Проверки | Фаза 1 (януари 2022 г.) | Фаза 2 (ноември 2022 г.) | Фаза 3  |
|-------------|------------------------|---------------------------|---------------------------|
| WBS ще бъде валидиран срещу често срещани нарушения на целостта на данните (например присвояване на ресурси, които са свързани с една и съща родителска задача, но имат различни родителски проекти). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо [известни ограничения на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS ще бъде валидиран спрямо известни ограничения на Project Desktop Client. | |  | :heavy_check_mark: |
| Ресурсите, които могат да се резервират, и календарите на проекти ще бъдат оценени спрямо общи изключения от правилото за несъвместими календари. | | :heavy_check_mark: | :heavy_check_mark: |

Във фаза 2, клиентите, които надстроят до Project Operations, ще имат своите съществуващи проекти надстроени до опит само за четене за планиране на проекти. В това изживяване само за четене пълният WBS ще бъде видим в мрежата за проследяване. За да редактират WBS, ръководителите на проекти могат да избират [**Преобразуване**](/PSA-Upgrade-Project-Conversion.md) на главната страница на проекта. След това фонов процес актуализира проекта, така че да поддържа новото изживяване за планиране на проекти от Project for the Web. Тази фаза е подходяща за клиенти, които имат проекти, които се вписват в рамките на [известни ограничения на Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries).

Във фаза 3 ще бъде добавена поддръжка за Project Desktop Client в полза на клиентите, които искат да продължат да редактират своите проекти от това приложение. Въпреки това, ако съществуващите проекти се преобразуват в новото изживяване на Project for the Web, достъпът до добавката ще бъде деактивиран за всеки преобразуван проект.

## <a name="prerequisites"></a>Предварителни изисквания

За да отговаряте на условията за надграждане на фаза 1, трябва да отговаряте на следните критерии:

- Целевата среда не трябва да съдържа никакви записи в обект **msdyn_projecttask**.
- Валидни лицензи за Project Operations трябва да бъдат присвоени на всички активни потребители. 
- Трябва да потвърдите процеса на надграждане в поне една непроизводствена среда, която съдържа представителен набор от данни, който е в съответствие с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до Project Service Automation Update Release 37 (V3.10.58.120) или по-нова.

За да отговаряте на условията за надграждане на фаза 2, трябва да отговаряте на следните критерии:

- Валидни лицензи за Project Operations трябва да бъдат присвоени на всички активни потребители. 
- Трябва да потвърдите процеса на надграждане в поне една непроизводствена среда, която съдържа представителен набор от данни, който е в съответствие с вашата производствена среда.
- Целевата среда трябва да бъде актуализирана до Project Service Automation Update Release 37 (V3.10.58.120) или по-нова.
- Среди, които съдържат задачи (msdyn_projecttask), се поддържат само ако общият брой задачи на проект е 500 или по-малко.

Предпоставките за Фаза 3 ще бъдат актуализирани с наближаването на датата на общата наличност.

## <a name="licensing"></a>Лицензиране

Ако имате активни лицензи за Project Service Automation, можете да инсталирате и използвате Project Operations, което включва всички възможности на Project Service Automation и други. По този начин можете да тествате възможностите на Project Operations, докато продължавате да използвате Project Service Automation в производството. След като вашите лицензи за Project Service Automation изтекат, ще трябва да преминете към Project Operations. Когато планирате този преход, трябва да имате предвид факта, че лицензът за Project Operations не включва лиценз за Project Service Automation. Клиенти, които имат сценарии, при които са внедрили Project Service Automation и трябва да продължат да използват или да увеличат своите лицензи за PSA, докато планират да преминат към Project Operations, могат да поискат временни PSA лицензи въз основа на закупени от Project Operations лицензи. Един лиценз за Project Service Automation ще бъде издаден за един лиценз за Project Operations. Временни PSA лицензи могат да бъдат заявени чрез тази връзка: aka.ms/ineedpsa

## <a name="testing-and-refactoring-customizations"></a>Тестване и преработване на персонализации

Като отправна точка импортирайте всички персонализации в чиста среда Project Operations (Lite), за да потвърдите, че импортирането е успешно и че бизнес операциите се държат според очакванията.

Ето някои неща, за които трябва да внимавате:

- Импортирането може да е неуспешно поради липсващи зависимости. С други думи, референтните полета за персонализиране или други компоненти, които са премахнати в Project Operations. В този случай премахнете тези зависимости от средата за разработка.
- Ако вашите неуправлявани и управлявани решения включват компоненти, които не са персонализирани, премахнете тези компоненти от решението. Например, когато персонализирате обект **Проект**, добавете само заглавката на обекта към вашето решение. Не добавяйте всички полета. Ако преди това сте добавили всички подкомпоненти, може да се наложи ръчно да създадете ново решение и да добавите съответните компоненти към него.
- Формулярите и изгледите може да не се показват според очакванията. При някои обстоятелства, ако сте персонализирали някой от готовите формуляри или изгледи, персонализациите може да попречат на новите актуализации в Project Operations да влязат в сила. За да идентифицирате тези проблеми, ви препоръчваме да направите паралелен преглед на чиста инсталация на Project Operations и инсталация на Project Operations, която включва вашите персонализации. Сравнете най-често използваните формуляри във вашия бизнес, за да потвърдите, че вашата версия на формуляра все още има смисъл и не липсва нещо от чистата версия на формуляра. Направете същия тип паралелен преглед за всички изгледи, които сте персонализирали.
- Бизнес логиката може да се провали по време на изпълнение. Тъй като препратките към полета във вашите добавки не са валидирани по време на импортиране, бизнес логиката може да се провали поради препратки към полета, които вече не съществуват, и може да получите съобщение за грешка, подобно на следния пример: Обектът „Проект“ не съдържа атрибут с Name = 'msdyn_plannedhours' и NameMapping = 'Logical'." В този случай променете вашите персонализации, така че да използват новите полета. Ако използвате автоматично генерирани прокси класове и препратки към силни типове във вашата логика на добавките, помислете за повторно генериране на тези прокси сървъри от чиста инсталация. По този начин можете лесно да идентифицирате всички места, където вашите добавки зависят от отхвърлени полета.

След като актуализирате вашите персонализации, за да импортирате чисто Project Operations, преминете към следващите стъпки.

## <a name="end-to-end-testing-in-development-environments"></a>Тестване от край до край в среди за разработка

### <a name="initiate-upgrade"></a>Започнете надграждане 

1. В центъра за администриране на Power Platform и открийте и изберете среда. След това в приложенията намерете и изберете **Dynamics 365 Project Operations**.
2. Изберете **Инсталиране**, за да стартирате надстройката. Центърът за администриране на Power Platform ще представи тази инсталация като нова инсталация. Наличието на по-ранна версия на Project Service Automation обаче ще бъде открито и съществуващата инсталация ще бъде надстроена.

    След като надстройката приключи, средата трябва да покаже, че Project Operations е инсталиран и че Project Service Automation не е инсталиран.

    В зависимост от обема на данните в средата обновяването може да отнеме няколко часа. Основният екип, който управлява надстройката, трябва да планира съответно и да изпълни надстройката в неработно време. В някои случаи, ако обемът на данните е голям, надстройката трябва да се изпълни през уикенда. Решението за планиране трябва да се основава на резултатите от тестването в по-ниски среди.

3. Надстройте персонализираните решения според случая. На този етап разположете всички промени, които сте направили във вашите персонализации в раздела [Тестване и преработване на персонализации](#testing-and-refactoring-customizations) на тази статия.
4. Отидете на **make.powerapps.com**, изберете средата от падащото меню в горния десен ъгъл на портала, изберете **Решения** от лявото меню изберете решение **Отхвърлени компоненти за Project Operations** и **Деинсталиране**.

    Това решение е временно решение, което съхранява съществуващия модел на данни и компоненти, които присъстват по време на надстройката. С премахването на това решение вие премахвате всички полета и компоненти, които вече не се използват. По този начин помагате за опростяването на интерфейса и улеснявате интегрирането и разширяването.
    
### <a name="upgrade-to-project-operations-lite"></a>Надстройка до Project Operations Lite

Следните стъпки описват процеса на надграждане и свързаното регистриране на грешки:

1. **Проверка на версията на PSA:** За да инсталирате Project Operations, трябва да имате V3.10.58.120 или по-нова версия.
1. **Предварително валидиране:** Когато администратор инициира надстройка, системата изпълнява операция за предварително валидиране на всеки обект, който е ядрото на решението Project Operations. Тази стъпка проверява дали всички препратки към обекти са валидни и гарантира, че данните, които са свързани с WBS, са в рамките на публикуваните ограничения на Project for the Web.
1. **Надграждане на метаданни:** След успешно предварително валидиране системата инициира промени в схемата и създава решение за отхвърлени компоненти. Можете да премахнете това отхвърлено решение, след като завършите всички необходими преработки на персонализациите. Тази стъпка е най-дългата част от процеса на надграждане и може да отнеме до четири часа.
1. **Надграждане на данни:** След като всички необходими промени в схемата са завършени в стъпката за надграждане на метаданни, вашите данни се мигрират към новата схема и се извършват всички необходими настройки по подразбиране и преизчисляване.
1. **Актуализация на системата на графика за проект:** След успешно надграждане на данни, разделът **График** на главната страница се премаркира на **Задачи**. Когато потребител избере този раздел след надстройката, той се насочва да премине към мрежата за проследяване, за да види версия само за четене на WBS. За да редактира WBS, той трябва да инициира [процеса на преобразуване на графика](/PSA-Upgrade-Project-Conversion.md). Всички проекти без предварително съществуващ WBS могат да използват новото изживяване за планиране директно, без преобразуване.
 
### <a name="validate-common-scenarios"></a>Валидиране на обичайни сценарии

Когато валидирате конкретните си персонализации, ви препоръчваме да прегледате и бизнес процесите, които се поддържат в приложенията. Тези бизнес процеси включват, но не се ограничават до, създаване на обекти за продажба като оферти и договори и създаване на проекти, които включват WBS и одобрение на действителни данни.

## <a name="major-changes-between-project-service-automation-and-project-operations"></a>Основни промени между Project Service Automation и Project Operations

Този раздел предоставя обобщение на основните промени, които можете да очаквате между Project Service Automation и Project Operations.

### <a name="project-planning"></a>Планиране на проект

Възможностите за планиране на проекти в Project Operations вече не разчитат на комбинация от логика от страна на клиента и логика от страна на сървъра. Вместо това Project Operations използва Project for the Web като свой механизъм за планиране. Тази промяна във възможностите за планиране позволява няколко нови функции, като изгледи на табло и Gantt изгледи, планиране, управлявано от ресурси, [елементи от контролния списък на задачите](https://support.microsoft.com/office/use-task-checklists-in-microsoft-project-for-the-web-c69bcf73-5c75-4ad3-9893-6d6f92360e9c) и режими за планиране на проекти. Новите възможности за планиране се поддържат и от богат набор от нови [интерфейси за програмиране на приложения (API)](../project-management/schedule-api-preview.md). Тези API са предназначени да гарантират, че нито една програмна операция за създаване, актуализиране или изтриване на обект в WBS не поврежда изчисляеми полета в графика.

### <a name="billing-and-pricing"></a>Фактуриране и ценообразуване

Като част от продължаващите инвестиции в Project Operations, няколко нови възможности са достъпни във „Фактуриране и ценообразуване“. Ето някои примери:

- [Записване на използването на материали по проекти и проектни задачи](../material/material-usage-log.md)
- [Управление на подизпълнения](../pro/subcontracting/managing-subcontracts-overview.md)
- [Базирани на авансови плащания и капаро договори](../pro/sales/set-up-advances-retainer-based-contracts-sales.md)
- [Състояние и проверки за стойности по договор, които не трябва да се надвишават](../pro/proforma-invoicing/manage-nte-status-validations-sales.md)
- Фактуриране, базирано на задача

### <a name="resource-management"></a>Управление на ресурси

Project Operations предоставя незадължителна поддръжка за асистента за табло и график Universal Resource Scheduling (URS). Това ново изживяване ще стане задължително във вълната за април 2023 г.

## <a name="frequently-asked-questions"></a>Често задавани въпроси

### <a name="which-deployment-types-are-currently-supported-for-upgrade"></a>Кои типове внедряване се поддържат в момента за надграждане?

| Източник                                                 | Цел                                                    | Статус                  |
|--------------------------------------------------------|-----------------------------------------------------------|-------------------------|
| Project Service Automation                             | Внедряване на Project Operations Lite                        | Поддържани               |
| Dynamics 365 Finance Управление на проекти и счетоводство | Внедряване на Project Operations Lite                        | В момента не се поддържа |
| Управление и счетоводство на финансите по проект              | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Project Service Automation 3.x                         | Project Operations за сценарии, базирани на ресурси/неналичност     | В момента не се поддържа |
| Project for the Web (специализирана среда)            | Внедряване на Project Operations Lite                        | В момента не се поддържа |

### <a name="how-can-i-install-project-operations-before-the-upgrade-tooling-is-available"></a>Как мога да инсталирам Project Operations, преди инструментите за надграждане да са налични?

Има две опции за инсталиране на Project Operations, преди инструментите за надграждане да са налични:

- Осигурете нова среда.
- Разположете Project Operations отделно във всяка търговска организация, където не присъства Project Service Automation.

Ако Project Service Automation е инсталиран в организация, но не е бил използван, той може да бъде деинсталиран. След като премахнете напълно Project Service Automation, Project Operations може да се инсталира в същата организация.
