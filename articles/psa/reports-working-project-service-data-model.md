---
title: Работа с модела на данни на Project Service Automation
description: Тази тема предоставя информация за това как да работите с модела на данни.
author: ruhercul
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 03/01/2019
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: d8c212ef2c9fd9dcd6be0b8f0a31aa5a948176bc
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 02/10/2021
ms.locfileid: "5147640"
---
# <a name="working-with-the-project-service-automation-data-model"></a>Работа с модела на данни на Project Service Automation

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]
[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

Dynamics 365 Project Service Automation разширява други обекти на приложения и въвежда свои собствени обекти в модела на данни на Common Data Service. Тази тема описва някои от обектите, които ще срещнете в типичните сценарии за отчитане на PSA.

## <a name="reporting-on-opportunities"></a>Отчитане на възможности

Project Service Automation разширява обекта **Възможност** на Dynamics 365 Sales чрез добавяне на полета, които позволяват сценарии, базирани на проекти. Тези полета се идентифицират с име на схема, която започва с **msdyn\_**. Едно ново поле, което е важно за отчитането на възможностите в PSA е **Тип поръчка**. Стойността на **Базирано на работа** за това поле показва, че възможността е възможност в PSA. Други полета, които са добавени към обекта, включват **Договаряща организация**, което регистрира организацията, притежаваща възможността, и **Мениджър на акаунт**, което регистрира името на мениджъра на акаунт, отговарящ за възможността.

Обектът **Ред на възможност** включва и полета, които са свързани с Project Service. **Метод на фактуриране** посочва дали редът на възможността трябва да се фактурира на база време и материали, или на база на фиксирана цена, и **Проект** регистрира името на проекта, който поддържа възможността. Други полета, които можете да отчитате, регистрират сумите на разходите и бюджета на клиента за елемента на реда.

## <a name="reporting-on-quotes"></a>Отчитане на оферти

PSA разширява обекта **Оферта** на Sales чрез добавяне на полета, свързани с проекта. **Тип поръчка** разграничава оферти в PSA от оферти, които не са в PSA. Стойността на **Базирано на работа** за това поле показва, че офертата е оферта в PSA. Други полета, които могат да бъдат свързани с отчитането на оферти в PSA, включват полета за суми, като например **Платими разходи**, **Неплатими разходи**, **Брутен марж**, **Прогнозни оценки** и **Бюджет**. Други полезни полета показват дали офертата е рентабилна, дали ще бъде завършена по график и дали отговаря на очакванията на клиента за бюджета.

PSA също така разширява обекта **Ред на оферта** на Sales. Едно поле, което PSA добавя е **Метод на фактуриране**, което показва как ще бъде фактуриран редът на офертата (време и материали или фиксирана цена). Други полета, които са добавени към обекта, регистрират свързания проект, който поддържа реда на офертата, фактурирането, разходите и бюджета.

PSA също така добавя нови свързани с оферта обекти към модела на данни на Dynamics 365. Ето някои примери:

- **Подробности на ред на оферта** – този обект съдържа подробностите за прогнозните оценки за проекта за реда на офертата. Има два записа за всеки ред на офертата. Единият запис съхранява разходите и подробностите за разходите на реда на офертата, а другият запис съхранява сумата на продажбите и подробностите за продажбите на реда от офертата.
- **График за фактуриране на ред на оферта** – този обект съдържа графика за фактуриране за реда на офертата. Този график се генерира въз основа на честотата на фактуриране, която е присвоена на реда на офертата.
- **Контролна точка в ред на оферта** – този обект съдържа контролните точки за фактуриране за редове на оферта с фиксирана цена.
- **Разбивка на анализа на ред на оферта** – този обект съдържа финансови подробности за реда на офертата. Тези подробности може да са полезни за отчитане на оферирани продажби и суми на прогнозни разходи по различни измерения.

Други обекти, които PSA добавя към офертите, са **Ценова листа на проект на ред на оферта**, **Категория ресурс на ред на оферта** и **Категория транзакция на ред на оферта**.

![Диаграма, показваща котировка, линия на котировки и взаимоотношения на проекти](media/PS-Reporting-image2.png "Диаграма, показваща котировка, линия на котировки и взаимоотношения на проекти")

## <a name="reporting-on-project-contracts"></a>Отчитане на договори по проект

PSA разширява обекта **Поръчка** на Sales, който се използва, когато се записват договори по проект. Той добавя важно ново поле, **Тип на поръчка**, което идентифицира договора като договор по проект в PSA вместо поръчка за продажба. Стойността на **Базирано на работа** за това поле показва, че поръчката е договор по проект в PSA. Другите нови полета, които са добавени към обекта **Поръчка** регистрират подробности за разходите, състоянието на договор в PSA и организацията, която притежава договора.

PSA също така разширява обекта **Ред на поръчка** на Sales. Сред полетата, които той добавя, са такива, които регистрират метода на фактуриране (време и материали или фиксирана цена), сумите на бюджета на клиента и базовия проект.

PSA също така добавя нови обекти, които са предназначени за договори по проекти. Ето някои примери:

- **Подробности на ред на договор по проект** – този обект съдържа подробностите на ниво ред, които са обобщени в сумата на реда на договора. Те могат да бъдат толкова подробни колкото елементите на редове, които се генерират от графика на проекта на ниво задача.
- **График за фактуриране на ред на договор** – този обект съдържа графика за фактуриране, който се генерира въз основа на честотата на фактуриране, която е присвоена на реда на договора.
- **Контролна точка на договор** – този обект съдържа контролните точки за фактуриране за редовете на договора, които имат срок за фактуриране на фиксирана цена.

Други обекти, които PSA добавя към договорите, са **Ценова листа на проект на ред на договор по проект**, **Категория ресурс на ред на договор по проект** и **Категория транзакция на ред на договор по проект**.

![Диаграма, показваща поръчка, линия на поръчки и взаимоотношения на проекти](media/PS-Reporting-image3.png "Диаграма, показваща поръчка, линия на поръчки и взаимоотношения на проекти")

## <a name="reporting-on-projects"></a>Отчитане на проекти

Обектът **Проекти** и свързаните с него обекти са изключителни за PSA. **Проект** е обектът от най-високо ниво, който се използва за регистриране операциите от страна на работата и разходите. Ето списък на свързаните обекти:

- **Член на екипа на проекта** – този обект съдържа подробности за наличните ресурси, които са присвоени на проекта. Тези ресурси могат да бъдат общи налични ресурси или могат да бъдат наименувани налични ресурси, които са въведени от мениджъра на проекта или са генерирани от графика на проекта.
- **Задача по проекта** – този обект съдържа задачите, които съставят плана или графика на проекта.
- **Присвояване на ресурси** – този обект съдържа присвояванията на задачи за наличен ресурс.
- **Изискване за ресурс** – този обект съдържа изискванията за всички членове на екипа за общи ресурси.
- **Прогнозна оценка** и **Ред на прогнозна оценка** – тези обекти имат релация заглавка/ред и съдържат прогнозни оценки на разходите за проекта. Прогнозните оценки за задачите се съхраняват в обекта **Прогнозна оценка на ресурси**.

![Диаграма, показваща изискване за ресурс, линия на поръчка и взаимоотношения на проекти](media/PS-Reporting-image4.png "Диаграма, показваща изискване за ресурс, линия на поръчка и взаимоотношения на проекти")

## <a name="reporting-on-resources"></a>Отчитане на ресурсите

Ресурсите по проекта използват обектите **Наличен ресурс** от Universal Resource Scheduling (URS), които се споделят с други приложения, като например Microsoft Dynamics 365 Field Service. По-долу е даден списък на обектите, които може да се наложи да използвате, когато отчитате ресурсите по проекта:

- **Наличен ресурс** – този обект представлява потребител, контакт, общ ресурс, акаунт, група или оборудване, които се използват в екипа на проекта.
- **Характеристики на наличен ресурс** – този обект включва уменията, сертификатите или образованието на ресурса. Характеристиките могат да имат стойности на оценките, които се определят от модела на оценка.
- **Категория налични ресурси** – този обект представлява ролята на наличния ресурс.
- **Резервации на наличен ресурс** – този обект представлява времето, което е резервирано по проекти за ресурса. Всяка резервация има обект на заглавка и обекти на редове и всеки ред има състояние, което представлява състоянието на резервацията.

![Диаграма, показваща връзки с характеристики на резервируемите ресурси](media/PS-Reporting-image5.png "Диаграма, показваща връзки с характеристики на резервируемите ресурси")

## <a name="reporting-on-actual-transactions"></a>Отчитане на действителните транзакции

Когато одобрите график или разход или фактурирате договор в PSA, бизнес транзакцията се регистрира в обекта **Действителни данни**. Този обект може да послужи като основа за почти всички свързани с финансите отчети в PSA. Обектът **Действителни данни** регистрира разходите и транзакциите по продажби за бизнес събитието. Той също така регистрира много свързани атрибути.

Когато работите с обекта **Действителни данни**, е важно да разберете каква транзакция или транзакции са записани в обекта и кога транзакциите се записват. По-долу е даден типичният поток, когато работите със записи за време (потокът за записи за разходи е подобен):

1. Когато записът за време се запише, в обекта **Действителни данни** не се създават записи.
2. Когато записът за време се подаде, в обекта **Действителни данни** не се създават записи.
3. Когато записът за време се одобри, в обекта **Действителни данни** се създава един запис и може да се създаде и втори запис. Първият запис съхранява стойността на записа за време. Вторият запис съхранява нефактурираната сума на продажбите на записа за време. Вторият запис зависи от проекта, имайки клиент, оферта или ред на договор, присвоен на него.

    | Дата на документа | Тип транзакция | Клас на транзакция | Клиент         | Договор   | Ресурс     | Роля на ресурс | Тип фактуриране | Количество | Единична цена | Сума |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|--------|
    | 2/3/18        | Разходи             | Време              | Алпийска ски къща | Алпийски CRM | Борислава Методиева | Мениджър на проекта   | Платими   | 8.0      | 50.00      | 400.00 |
    | 2/3/18        | Нефактурирани продажби   | Време              | Алпийска ски къща | Алпийски CRM | Борислава Методиева | Мениджър на проекта   | Платими   | 8.0      | 100.00     | 800.00 |

    Тези два записа са отделни, но свързани записи. Те не са нито дебити, нито кредити.

4. Ако даден договор е свързан с проекта, когато записът за време е фактуриран, в обекта **Действителни данни** се създават още два записа. Първо, създава се отрицателна сума за записа за нефактурирани продажби. Този запис по същество сторнира нефактурираната продажба. Второ, създава се транзакция за фактурираната продажба. Още веднъж, тези записи са отделни, но свързани записи, а не дебити и кредити.

    | Дата на документа | Тип транзакция | Клас на транзакция | Клиент         | Договор   | Ресурс     | Роля на ресурс | Тип фактуриране | Количество | Единична цена | Сума   |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|----------|
    | 2/4/18        | Нефактурирани продажби   | Време              | Алпийска ски къща | Алпийски CRM | Борислава Методиева | Мениджър на проекта   | Платими   | - 8,0    | 100,00     | - 800,00 |
    | 2/4/18        | Фактурирани продажби     | Време              | Алпийска ски къща | Алпийски CRM | Борислава Методиева | Мениджър на проекта   | Платими   | 8.0      | 100.00     | 800.00   |

Обектът **Произход на транзакцията** записва произхода на записа **Действителни данни**, а обектът **Връзка на транзакцията** записва свързаните записи за записа **Действителни данни**. Освен това записът **Действителни данни** съдържа препратки към проекта, договор по проекта (поръчка), наличен ресурс и клиент.

![Диаграма, показваща връзката на транзакцията, произхода и действителните връзки](media/PS-Reporting-image6.png "Диаграма, показваща връзката на транзакцията, произхода и действителните връзки")
