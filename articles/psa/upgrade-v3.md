---
title: Съображения за надстройка – Microsoft Dynamics 365 Project Service Automation, версия 2.x или 1.x до версия 3
description: Тази тема предоставя информация за съображенията, които трябва да вземете предвид, когато надстройвате от Project Service Automation, версия 2.x или 1.x до версия 3.
manager: kfend
ms.service: dynamics-365-customerservice
ms.custom:
- dyn365-projectservice
ms.date: 11/13/2018
ms.topic: article
author: JohnPBurrows
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: 19d6d312c7cedd2d7b9b5649452b85dd24fae761
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 10/16/2020
ms.locfileid: "4071900"
---
# <a name="upgrade-considerations---psa-version-2x-or-1x-to-version-3"></a><span data-ttu-id="52dfb-103">Съображения за надстройка – PSA версия 2.x или 1.x до версия 3.x</span><span class="sxs-lookup"><span data-stu-id="52dfb-103">Upgrade considerations - PSA version 2.x or 1.x to version 3</span></span>
[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

## <a name="project-service-automation-and-field-service"></a><span data-ttu-id="52dfb-104">Project Service Automation и Field Service</span><span class="sxs-lookup"><span data-stu-id="52dfb-104">Project Service Automation and Field Service</span></span>
<span data-ttu-id="52dfb-105">Dynamics 365 Project Service Automation и Dynamics 365 Field Service използват решението Universal Resourcing Scheduling (URS) за планиране на ресурси.</span><span class="sxs-lookup"><span data-stu-id="52dfb-105">Both Dynamics 365 Project Service Automation and Dynamics 365 Field Service use the Universal Resourcing Scheduling (URS) solution for resource scheduling.</span></span> <span data-ttu-id="52dfb-106">Ако имате Project Service Automation и Field Service в екземпляра си, трябва да планирате надстройка на двете решения до най-новата версия (version 3.x за Project Service Automation, версия 8.x за Field Service).</span><span class="sxs-lookup"><span data-stu-id="52dfb-106">If you have both Project Service Automation and Field Service in your instance, you should plan on upgrading both solutions to the latest version (version 3.x for Project Service Automation, version 8.x for Field Service).</span></span> <span data-ttu-id="52dfb-107">Надстройването на Project Service Automation или на Field Service ще инсталира най-новата версия на URS, което означава, че е възможно противоречиво поведение, ако не са надстроени до най-новата версия и двете решения Project Service Automation и Field Service.</span><span class="sxs-lookup"><span data-stu-id="52dfb-107">Upgrading Project Service Automation or Field Service will install the latest version of URS, which means that inconsistent behavior is possible if both Project Service Automation and Field Service solutions in the same instance aren’t upgraded to the latest version.</span></span>

## <a name="resource-assignments"></a><span data-ttu-id="52dfb-108">Присвоявания на ресурси</span><span class="sxs-lookup"><span data-stu-id="52dfb-108">Resource assignments</span></span>
<span data-ttu-id="52dfb-109">В Project Service Automation, версия 2 и версия 1 присвояванията на задачи се съхраняваха като дъщерни задачи (наричани още линейни задачи) в обекта **Задача** и косвено свързани с обекта **Присвояване на ресурс**.</span><span class="sxs-lookup"><span data-stu-id="52dfb-109">In Project Service Automation version 2 and version 1, task assignments were stored as child tasks (also called line tasks) in the **Task entity** , and indirectly related to the **Resource Assignment** entity.</span></span> <span data-ttu-id="52dfb-110">Линейната задача беше видима в изскачащия прозорец за присвояване в съставната структура на работата (ССР).</span><span class="sxs-lookup"><span data-stu-id="52dfb-110">The line task was visible in the assignment pop-up window on the Work Breakdown Structure (WBS).</span></span>

![Линейни задачи на ССР в Project Service Automation, версия 2 и версия 1](media/upgrade-line-task-01.png)

<span data-ttu-id="52dfb-112">Във версия 3 на Project Service Automation основната схема за присвояване на налични ресурси на задачи се е променила.</span><span class="sxs-lookup"><span data-stu-id="52dfb-112">In version 3 of Project Service Automation, the underlying schema of assigning bookable resources to tasks has changed.</span></span> <span data-ttu-id="52dfb-113">Линейната задача е отхвърлена и има директна релация 1:1 между задачата в обекта **Задача** и члена на екипа в обекта **Присвояване на ресурс**.</span><span class="sxs-lookup"><span data-stu-id="52dfb-113">The line task has been deprecated and there is a direct 1:1 relationship between the task in the **Task entity** and the team member in the **Resource Assignment** entity.</span></span> <span data-ttu-id="52dfb-114">Задачи, които са присвоени на член на екипа на проекта, сега се съхраняват директно в обекта „Присвояване на ресурс“.</span><span class="sxs-lookup"><span data-stu-id="52dfb-114">Tasks that are assigned to a project team member are now stored directly in the Resource Assignment entity.</span></span>  

<span data-ttu-id="52dfb-115">Тези промени влияят върху надстройването на всички съществуващи проекти, които имат присвоявания на ресурси за наименувани налични ресурси и общи ресурси в екип по проект.</span><span class="sxs-lookup"><span data-stu-id="52dfb-115">These changes impact the upgrade of any existing projects that have resource assignments for named bookable resources and generic resources on a project team.</span></span> <span data-ttu-id="52dfb-116">Тази тема предоставя съображенията, които ще трябва да вземете предвид за вашите проекти, когато надстроите до версия 3.</span><span class="sxs-lookup"><span data-stu-id="52dfb-116">This topic provides the considerations that you will need to take into account for your projects when you upgrade to version 3.</span></span> 

### <a name="tasks-assigned-to-named-resources"></a><span data-ttu-id="52dfb-117">Задачи, присвоени на наименувани ресурси</span><span class="sxs-lookup"><span data-stu-id="52dfb-117">Tasks assigned to named resources</span></span>
<span data-ttu-id="52dfb-118">С помощта на обекта на основната задача задачите във версия 2 и версия 1 позволяваха на членовете на екипа да изобразяват роля, различна от тяхната определена роля по подразбиране.</span><span class="sxs-lookup"><span data-stu-id="52dfb-118">Using the underlying task entity, tasks in version 2 and version 1 allowed team members to portray a role other than their default defined role.</span></span> <span data-ttu-id="52dfb-119">Например Огняна Джурова, на която по подразбиране има присвоена роля на програмен мениджър, може да бъде присвоена на задача с ролята на разработчик.</span><span class="sxs-lookup"><span data-stu-id="52dfb-119">For example, Gracie George, who’s by default assigned the role of Program Manager, could be assigned to a task with the role of Developer.</span></span> <span data-ttu-id="52dfb-120">Във версия 3 ролята на наименуван член на екипа винаги е по подразбиране, така че всяка задача, към която е присвоена Огняна Джурова, използва нейната роля по подразбиране на програмния мениджър.</span><span class="sxs-lookup"><span data-stu-id="52dfb-120">In version 3, the role of a named team member is always the default, so any task that Gracie George is assigned to uses her default role of Program Manager.</span></span>

<span data-ttu-id="52dfb-121">Ако сте присвоили ресурс на задача извън неговата роля по подразбиране във версия 2 и версия 1, когато надстроите, на наименувания ресурс ще бъде присвоена ролята по подразбиране за всички присвоявания на задачи, независимо от присвояването на роля във версия 2.</span><span class="sxs-lookup"><span data-stu-id="52dfb-121">If you have assigned a resource to a task outside of their default role in version 2 and version 1, when you upgrade, the named resource will be assigned the default role for all task assignments, regardless of role assignment in version 2.</span></span> <span data-ttu-id="52dfb-122">Това ще доведе до разлики в изчислените прогнозни оценки от версия 2 или версия 1 спрямо версия 3, тъй като изчисленията се изчисляват въз основа на ролята на ресурса, а не на присвояването на линейна задача.</span><span class="sxs-lookup"><span data-stu-id="52dfb-122">This will result in differences in the calculated estimates from version 2 or version 1 to version 3 because estimates are calculated based on the role of the resource and not the line task assignment.</span></span> <span data-ttu-id="52dfb-123">Например във версия 2 са присвоени две задачи на Борислава Методиева.</span><span class="sxs-lookup"><span data-stu-id="52dfb-123">For example, in version 2, two tasks have been assigned to Ashley Chinn.</span></span> <span data-ttu-id="52dfb-124">Ролята за линейната задача за задача 1 е разработчик, а за задача 2 – програмен мениджър.</span><span class="sxs-lookup"><span data-stu-id="52dfb-124">The role on the line task for task 1 is Developer and for task 2, Program Manager.</span></span> <span data-ttu-id="52dfb-125">Борислава Методиева има роля по подразбиране програмен мениджър.</span><span class="sxs-lookup"><span data-stu-id="52dfb-125">Ashley Chinn has the default role of Program Manager.</span></span>

![Няколко роли, присвоени на един ресурс](media/upgrade-multiple-roles-02.png)

<span data-ttu-id="52dfb-127">Тъй като ролите на разработчик и програмен мениджър се различават, прогнозните разходи и продажби са както следва:</span><span class="sxs-lookup"><span data-stu-id="52dfb-127">Because the roles of Developer and Program Manager differ, the cost and sales estimates are as follows:</span></span>

![Прогнозни разходи за роли на ресурси](media/upggrade-cost-estimates-03.png)

![Прогнозни продажби за роли на ресурси](media/upgrade-sales-estimates-04.png)

<span data-ttu-id="52dfb-130">Когато надстроите до версия 3, линейните задачи се заменят с присвоявания на ресурси за задачата на член на екипа на наличен ресурс.</span><span class="sxs-lookup"><span data-stu-id="52dfb-130">When you upgrade to version 3, line tasks are replaced with resource assignments on the task of the bookable resource team member.</span></span> <span data-ttu-id="52dfb-131">Присвояването ще използва ролята по подразбиране на наличния ресурс.</span><span class="sxs-lookup"><span data-stu-id="52dfb-131">The assignment will use the default role of the bookable resource.</span></span> <span data-ttu-id="52dfb-132">В следващата графика Борислава Методиева, която има роля на програмен мениджър, е ресурсът.</span><span class="sxs-lookup"><span data-stu-id="52dfb-132">In the following graphic, Ashley Chinn who has a role of Program Manager, is the resource.</span></span>

![Присвоявания на ресурси](media/resource-assignment-v2-05.png)

<span data-ttu-id="52dfb-134">Тъй като прогнозните оценки се базират на ролята по подразбиране за ресурса, прогнозните продажби и разходи може да се променят.</span><span class="sxs-lookup"><span data-stu-id="52dfb-134">Because the estimates are based on the default role for the resource, the sales and cost estimates may change.</span></span> <span data-ttu-id="52dfb-135">Забележете, че в следващата графика вече не виждате ролята **Разработчик** , тъй като тя сега е поета от ролята по подразбиране на наличния ресурс.</span><span class="sxs-lookup"><span data-stu-id="52dfb-135">Note that in the following graphic, you no longer see the **Developer** role as the role is now taken from the bookable resource’s default role.</span></span>

<span data-ttu-id="52dfb-136">![Прогнозни разходи за роли по подразбиране](media/resource-assignment-cost-estimate-06.png)
![Прогнозни продажби за роли по подразбиране](media/resource-assignment-sales-estimate-07.png)</span><span class="sxs-lookup"><span data-stu-id="52dfb-136">![Cost estimates for default roles](media/resource-assignment-cost-estimate-06.png)
![Sales estimate for default roles](media/resource-assignment-sales-estimate-07.png)</span></span>

<span data-ttu-id="52dfb-137">След като надстройката завърши, можете да редактирате ролята на член на екипа да бъде различна от присвоена по подразбиране.</span><span class="sxs-lookup"><span data-stu-id="52dfb-137">After upgrade is complete, you can edit a team member's role to be something other than the assigned default.</span></span> <span data-ttu-id="52dfb-138">Ако обаче промените ролята на члена на екипа, тя ще бъде променена във всички негови присвоени задачи, защото на членовете на екипа във версия 3 вече не е разрешено да им бъдат присвоявани по няколко роли.</span><span class="sxs-lookup"><span data-stu-id="52dfb-138">However, if you change a team members role, it will be changed on all of their assigned tasks because team members are no longer allowed to be assigned multiple roles in version 3.</span></span>

![Актуализиране на роля на ресурс](media/resource-role-assignment-08.png)

<span data-ttu-id="52dfb-140">Това важи и за линейните задачи, които бяха присвоявани на наименувани ресурси, когато променяте организационната единица на ресурса от по подразбиране на друга организационна единица.</span><span class="sxs-lookup"><span data-stu-id="52dfb-140">This is also true for line tasks that were assigned to named resources when you change the resource’s organization unit from the default to another organization unit.</span></span> <span data-ttu-id="52dfb-141">След завършване на надстройването на версия 3, присвояването ще използва организационната единица по подразбиране на ресурса вместо тази, зададена в линейната задача.</span><span class="sxs-lookup"><span data-stu-id="52dfb-141">After the version 3 upgrade is complete, the assignment will use the resource’s default organization unit instead of the one set on the line task.</span></span>

### <a name="tasks-assigned-to-generic-resources"></a><span data-ttu-id="52dfb-142">Задачи, присвоени на общи ресурси</span><span class="sxs-lookup"><span data-stu-id="52dfb-142">Tasks assigned to generic resources</span></span>
<span data-ttu-id="52dfb-143">Във версия 2 и версия 1 можехте да зададете ролята и организационната единица за задача и след това да използвате функцията **Генериране на екип** за генериране на общи ресурси въз основа на атрибутите, зададени за задачата.</span><span class="sxs-lookup"><span data-stu-id="52dfb-143">In version 2 and version 1, you can set the role and org unit on a task and then use the **Generate team** feature to generate generic resources based on the attributes set on the task.</span></span> <span data-ttu-id="52dfb-144">Във версия 3 създавате общи членове на екипа с роля и организационна единица и след това присвоявате членовете на екипа на задачи.</span><span class="sxs-lookup"><span data-stu-id="52dfb-144">In version 3, you create the generic team members with role and org unit, and then assign the team members to tasks.</span></span>

<span data-ttu-id="52dfb-145">Във версия 2 и версия 1 проектите с общи ресурси можеха да бъдат в две състояния или в комбинация от двете на ниво задача.</span><span class="sxs-lookup"><span data-stu-id="52dfb-145">In version 2 and version 1, projects with generic resources can be in two states, or a mix of both at the task level.</span></span> <span data-ttu-id="52dfb-146">Например можете да имате следните сценарии:</span><span class="sxs-lookup"><span data-stu-id="52dfb-146">For example, you can have the following scenarios:</span></span>

- <span data-ttu-id="52dfb-147">Задачи със зададени роли и организационни единици, но не е генерирано присвояване на свързан ресурс.</span><span class="sxs-lookup"><span data-stu-id="52dfb-147">Tasks with roles and org units set, but no affiliated resource assignment has been generated.</span></span>
- <span data-ttu-id="52dfb-148">Задачи с присвоявания на общ ресурс член на екипа, които бяха присвоявани чрез създаване на общ ресурс с помощта на функцията **Генериране на екип**.</span><span class="sxs-lookup"><span data-stu-id="52dfb-148">Tasks with generic team member resource assignments that were assigned by creating generic resource using the **Generate team** feature.</span></span>

<span data-ttu-id="52dfb-149">Преди да започнете надстройката, ви препоръчваме да генерирате отново екипа за всеки проект, който има задачи, присвоени на общи ресурси, или все още трябва да генерира изпълнение на процеса на екипа за тях.</span><span class="sxs-lookup"><span data-stu-id="52dfb-149">Before you begin your upgrade, we recommend that you re-generate the team for each project that has tasks assigned to generic resources or has yet to have the generate team process run on them.</span></span>

<span data-ttu-id="52dfb-150">За задачи, които са присвоени на общи членове на екипа, генерирани с **Генериране на екип** , надстройката ще остави общия ресурс в екипа и ще остави присвояването на този общ член на екипа.</span><span class="sxs-lookup"><span data-stu-id="52dfb-150">For tasks that are assigned to generic team members that were generated with **Generate Team** , the upgrade will leave the generic resource on the team and leave the assignment to that generic team member.</span></span> <span data-ttu-id="52dfb-151">Препоръчително е да генерирате изискването за ресурс за общия член на екипа след надстройването, но преди да резервирате или подадете заявка за ресурс.</span><span class="sxs-lookup"><span data-stu-id="52dfb-151">We recommend that you generate the resource requirement for the generic team member after the upgrade but before you book or submit a resource request.</span></span> <span data-ttu-id="52dfb-152">Това ще запази всяко присвояване на организационна единица за общи членове на екипа, които са различни от организационната единица, сключваща договора, на проекта.</span><span class="sxs-lookup"><span data-stu-id="52dfb-152">This will preserve any org unit assignments on the generic team members that are different than the project’s contracting org unit.</span></span>

<span data-ttu-id="52dfb-153">Например в проекта Z организационната единица, сключваща договора, е Contoso САЩ.</span><span class="sxs-lookup"><span data-stu-id="52dfb-153">For example, in the Project Z project, the contracting org unit is Contoso US.</span></span> <span data-ttu-id="52dfb-154">В плана на проекта задачите за тестване в рамките на фазата на изпълнение са присвоени на техническия консултант и присвоената организационна единица е Contoso Индия.</span><span class="sxs-lookup"><span data-stu-id="52dfb-154">In the project plan, testing tasks within the Implementation phase have been assigned the role Technical Consultant and the assigned org unit is Contoso India.</span></span>

![Присвояване на организация във фаза на изпълнение](media/org-unit-assignment-09.png)

<span data-ttu-id="52dfb-156">След фазата на изпълнение интеграционната задача за проверка се присвоява на ролята технически консултант, но организацията е зададена на Contoso САЩ.</span><span class="sxs-lookup"><span data-stu-id="52dfb-156">After the implementation phase, the integration test task is assigned to the role Technical consultant, but the org is set to Contoso US.</span></span>  

![Присвояване на организация на интеграционна задача за проверка](media/org-unit-generate-team-10.png)

<span data-ttu-id="52dfb-158">Когато генерирате екип за проекта, два общи членове на екипа се създават поради различните организационни единици на задачите.</span><span class="sxs-lookup"><span data-stu-id="52dfb-158">When you generate a team for the project, two generic team members are created due to the different org units on the tasks.</span></span> <span data-ttu-id="52dfb-159">На технически консултант 1 ще бъдат присвоени задачи от Contoso Индия, а на технически консултант 2 – задачи от Contoso САЩ.</span><span class="sxs-lookup"><span data-stu-id="52dfb-159">Technical consultant 1 will be assigned the Contoso India tasks and Technical consultant 2 will have the Contoso US tasks.</span></span>  

![Генерирани общи членове на екипа](media/org-unit-assignments-multiple-resources-11.png)

> [!NOTE]
> <span data-ttu-id="52dfb-161">В Project Service Automation, версия 2 и версия 1 членът на екипа не съдържа организационната единица, която се поддържа в линейната задача.</span><span class="sxs-lookup"><span data-stu-id="52dfb-161">In Project Service Automation version 2 and version 1, the team member does not hold the organization unit, that is maintained on the line task.</span></span>

![Линейни задачи на версия 2 и версия 1 в Project Service Automation](media/line-tasks-12.png)

<span data-ttu-id="52dfb-163">Можете да видите организационната единица в изгледа на прогнозните оценки.</span><span class="sxs-lookup"><span data-stu-id="52dfb-163">You can see the organization unit on the estimates view.</span></span> 

![Прогнозни оценки на организационна единица](media/org-unit-estimates-view-13.png)
 
<span data-ttu-id="52dfb-165">Когато надстройката завърши, организационната единица на линейната задача, която отговаря на общия член на екипа, се добавя към общия член на екипа и линейната задача се премахва.</span><span class="sxs-lookup"><span data-stu-id="52dfb-165">When the upgrade is complete, the organization unit on the line task that corresponds to the generic team member is added to the generic team member and the line task is removed.</span></span> <span data-ttu-id="52dfb-166">Поради това препоръчваме преди надстройване да генерирате или да генерирате отново екипа на всеки проект, който съдържа общи ресурси.</span><span class="sxs-lookup"><span data-stu-id="52dfb-166">Because of this, we recommend that before you upgrade, you generate or re-generate the team on each project that contains generic resources.</span></span>

<span data-ttu-id="52dfb-167">За задачи, които са присвоени на роля с организационна единица, която се различава от организационната единица на проекта за договаряне, и екипът не е генериран, надстройката ще създаде общ член на екипа за ролята, но ще използва единицата, сключваща договора, на проекта за организационна единица на члена на екипа.</span><span class="sxs-lookup"><span data-stu-id="52dfb-167">For tasks that are assigned to a role with an org unit that differs from the org unit of the contracting project, and a team has not been generated, upgrade will create a generic team member for the role, but will use the contracting unit of the project for the team member's org unit.</span></span> <span data-ttu-id="52dfb-168">Позовавайки се на примера с проект Z, това означава, че организационната единица, сключваща договора, Contoso САЩ и тестовите задачи на плана на проекта в рамките на фазата на изпълнение имат присвоена роля на техническия консултант и организационната единица е присвоена на Contoso Индия.</span><span class="sxs-lookup"><span data-stu-id="52dfb-168">Referring back to the example with Project Z, this means that the contracting org unit Contoso US, and the project plan testing tasks within the Implementation phase have been assigned the role Technical Consultant with the org unit assigned to Contoso India.</span></span> <span data-ttu-id="52dfb-169">Тестовата задача за интеграция, завършена след фазата на изпълнение, е присвоена на ролята технически консултант.</span><span class="sxs-lookup"><span data-stu-id="52dfb-169">The Integration test task that is completed after the Implementation phase has been assigned to the role Technical consultant.</span></span> <span data-ttu-id="52dfb-170">Организационната единица е Contoso САЩ и екипът не е генериран.</span><span class="sxs-lookup"><span data-stu-id="52dfb-170">The org unit is Contoso US and a team has not been generated.</span></span> <span data-ttu-id="52dfb-171">Надстройката ще създаде един общ член на екипа, технически консултант, който има присвоените часове на трите задачи, както и организационна единица на Contoso САЩ, организационната единица, сключваща договора на проекта.</span><span class="sxs-lookup"><span data-stu-id="52dfb-171">Upgrade will create one generic team member, a Technical consultant that has the assigned hours of all three tasks, and an org unit of Contoso US, the project’s contracting org unit.</span></span>   
 
<span data-ttu-id="52dfb-172">Промяната по подразбиране на различните ресурсни единици за негенерирани членове на екипа е причината да ви препоръчваме да генерирате или да генерирате отново екипа за всеки проект, който съдържа общи ресурси, преди надстройването, така че присвояванията на организацията да не се загубят.</span><span class="sxs-lookup"><span data-stu-id="52dfb-172">Changing the default of the different resourcing org units on un-generated team members is the reason we recommend that you generate or re-generate the team on each project that contains generic resources prior to the upgrade so that the org unit assignments are not lost.</span></span>

