---
title: Добавяне на персонализирани полета към настройка на цени и обекти за транзакции
description: Тази тема предоставя информация за добавяне на персонализирани полета към настройка на цени и обекти за транзакции.
author: Rumant
ms.custom:
- dyn365-projectservice
ms.date: 10/01/2020
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: 3ca48b8d5d55b1b2178f9bd84e19d9599f057aa296a728cca57577c18fdaf307
ms.sourcegitcommit: 7f8d1e7a16af769adb43d1877c28fdce53975db8
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 08/06/2021
ms.locfileid: "6985758"
---
# <a name="add-custom-fields-to-price-setup-and-transactional-entities"></a>Добавяне на персонализирани полета към настройка на цени и обекти за транзакции 

[!include [banner](../includes/psa-now-project-operations.md)]

Тази тема предполага, че сте завършили процедурите в темата [Създаване на персонализирани полета и обекти](create-custom-fields-entities.md) Ако не сте изпълнили тези процедури, върнете се и ги изпълнете, след което се върнете към тази тема. 

В тази тема процедурите ще ви покажат как да добавите задължителните препратки към персонализирани полета към обекти и към елементите на потребителския интерфейс (UI), като например формуляри и изгледи.

## <a name="add-custom-pricing-dimension-fields"></a>Добавяне на полета за измерения за персонализирано ценообразуване 
След като бъдат създадени персонализирани полета и обекти, следващата стъпка е да информирате настройката на цените и обектите за транзакции с всички персонализирани обекти или набори от опции, като създадете справочни полета. В зависимост от това дали вашият списък с ценови измерения включва измерения въз основа на набор от опции или измерения въз основа на обекти, или и двете, следвайте само стъпките съответно в **Персонализирани ценови измерения, базирани на набор от опции** или **Персонализирани ценови измерения, базирани на обекти**, или и двете.

### <a name="option-set-based-custom-pricing-dimensions"></a>Персонализирани ценови измерения, базирани на набор от опции
Когато персонализирано ценово измерение е базирано на набор от опции, добавете го като поле към основните обекти на Project Service. В следващата процедура **Месторабота на ресурс** и **Работни часове на ресурс** се използват като ценови измерения на базата на набор от опции. Те трябва първо да бъдат добавени като полета към обекти за ценообразуване **Цена на роля** и **Надценка над цена на роля**.

1. В Project Service Automation (PSA) щракнете върху **Настройки** > **Решения** и след това щракнете двукратно върху **Ценови измерения на \<your organization name>**. 
2. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Цена на роля**.
3. Разширете обекта **Цена на роля** и изберете **Полета**.
4. Щракнете върху **Нов**, за да създадете ново поле, наречено **Месторабота на ресурс**, и изберете **Набор от опции** като тип на полето. 
5. Изберете **Използване на съществуващ набор от опции**, изберете набора от опции **Месторабота на ресурс** и след това щракнете върху **Запиши**.
6. Повторете стъпки 1 – 5, за да добавите това поле към обекта **Надценка над цена на роля**. 
7. Повторете стъпки 1 – 5 за набора от опции **Работни часове на ресурс**.

> [!IMPORTANT]
> Когато добавяте поле към повече от един обект, използвайте едно и също име на полето във всички обекти. 

> ![Добавяне на месторабота на ресурс към цена на роля.](media/RWL-Field.png)

Във фазите на продажба и прогнозна оценка за даден проект, прогнозните оценки за работното усилие, необходимо за изпълнение на работа **Локално** и **На място** в **Редовно работно време** и **Извънреден труд**, се използват за прогнозна оценка на стойността на офертата/проекта. Полетата **Месторабота на ресурс** и **Работни часове на ресурс** ще бъдат добавени към обектите за прогнозна оценка **Подробности за ред на оферта**, **Подробности за ред на договор**, **Задача по проекта**, **Член на екипа на проекта** и **Ред за прогнозна оценка**.

1. В PSA щракнете върху **Настройки** > **Решения** и след това щракнете двукратно върху **Ценови измерения на \<your organization name>**. 
2. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Подробности за ред на оферта**.
3. Разгънете обекта **Подробности за ред за оферта** и изберете **Полета**.
4. Щракнете върху **Нов**, за да създадете ново поле, наречено **Месторабота на ресурс**, и изберете типа поле **Набор от опции**. 
5. Изберете **Използване на съществуващ набор от опции** и **Месторабота на ресурс**, след което щракнете върху **Запиши**.
6. Повторете стъпки 1 – 5, за да добавите това поле към **Подробности за ред на проект**, **Задача по проекта**, **Член на екипа на проект** и **Ред за прогнозна оценка**.
7. Повторете стъпки 1 – 6 за набора от опции **Работни часове на ресурс**. 

> ![Добавяне на месторабота на ресурс към ред за прогнозна оценка.](media/RWL-Default-Value.png)


За доставка и фактуриране цената на извършената работа трябва да бъде точно определена, за да се избере дали е била извършена **Локално**, или **На място**, и дали е била извършена през **Редовно работно време**, или като **Извънреден труд**, в действителните данни за проекта. Полетата **Месторабота на ресурс** и **Работни часове на ресурс** трябва да се добавят към обектите **Запис за време**, **Действителни данни**, **Подробности за ред на фактура** и **Счетоводен запис**.

1. В PSA щракнете върху **Настройки** > **Решения** и след това щракнете двукратно върху **Ценови измерения на \<your organization name>**.
2. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Запис за време**.
3. Разгънете обекта **Подробности за ред на оферта** и след това изберете **Полета**.
4. Щракнете върху **Нов**, за да създадете ново поле, наречено **Месторабота на ресурс**, и изберете **Набор от опции** като тип на полето. 
5. Изберете **Използване на съществуващ набор от опции**, изберете набора от опции **Месторабота на ресурс** и след това щракнете върху **Запиши**.
6. Повторете стъпки 1 – 5, за да добавите това поле към обектите **Действителни данни**, **Подробности за ред на фактура** и **Счетоводен запис**.
7. Повторете стъпки 1 – 6 за набора от опции **Работни часове на ресурс**. 

> ![Добавяне на месторабота на ресурс към запис за време.](media/RWL-time-entry.png)

Това завършва промените на схемата, необходими за персонализираните измерения, базирани на набор от опции.

## <a name="entity-based-custom-pricing-dimensions"></a>Персонализирани ценови измерения, базирани на обекти

Когато персонализираното ценово измерение е обект, ще добавите релации 1:N между обекта на измерение и основните обекти на Project Service. Като използвате примера за стандартна длъжност по-горе, разумно е да се очаква, че на всеки служител се присвоява стандартна длъжност. В резултат на това ще ви е необходима релация от типа 1: N от стандартна длъжност към наличен ресурс или релация от типа N:1, ако е създадена от наличен ресурс към стандартна длъжност.

1. В PSA щракнете върху **Настройки** > **Решения** и след това щракнете двукратно върху **Ценови измерения на \<your organization name>**. 
2. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Стандартна длъжност**.
3. Разгънете обекта **Стандартна длъжност** и изберете **Релации 1:N**.
4. Щракнете върху **Нова**, за да създадете нова релация 1:N, наречена **Стандартна длъжност към наличен ресурс**. Въведете необходимата информация и след това щракнете върху **Запиши**.

> ![Добавяне на стандартна длъжност като поле за препратка към наличен ресурс.](media/ST-BR.png)

Стандартната длъжност също ще трябва да се добави към обектите за ценообразуване на Project Service **Цена на роля** и **Надценка над цена на роля**. Това също се извършва с помощта на релации 1:N между обектите **Стандартна длъжност** **Цена на роля** и обектите **Стандартна длъжност** и **Надценка над цената на роля**.

1. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Стандартна длъжност**.
2. Разгънете обекта **Стандартна длъжност** и изберете **Релации 1:N**.
3. Щракнете върху **Нова**, за да създадете нова релация 1:N, наречена **Стандартна длъжност към цена на роля**. Въведете необходимата информация и след това щракнете върху **Запиши**.
4. Повторете стъпки 1 – 4, за да създадете релации 1:N между обектите **Стандартна длъжност** и **Надценка над цена на роля**.

Във фазите на продажба и прогнозна оценка за проекта се изискват прогнозни оценки на работното усилие за всяко стандартна длъжност, за да се определи цената на офертата/проекта. Това означава, че са необходими релации 1:N от стандартна длъжност към всеки от тези обекти за прогнозна оценка в Project Service: 

- **Подробности за ред на оферта**
- **Подробни данни за аспекти на договор по проект**
- **Задача от проект**
- **Член на екипа на проект**
- **Ред за оценка**

5. Повторете стъпки 1 – 5, за да създадете релации 1:N от **Стандартна длъжност** към **Подробности за ред на оферта**, **Подробности за ред на договор по проект**, **Задача по проекта**, **Член на екипа на проект** и **Ред за прогнозна оценка**.

> ![Добавяне на стандартна длъжност като поле за препратка към ред за прогнозна оценка.](media/ST-Estimate-Line.png)

Във фазите за доставка и фактуриране работата, изпълнена от всяко стандартна длъжност, трябва да бъде точно оценена в действителните данни за проекта. Това означава, че трябва да има релации 1:N от **Стандартна длъжност** към обектите **Запис за време** **Действителни данни**, **Подробности за ред на фактура** и **Счетоводен запис**.

6. Повторете стъпки 1 – 6, за да създадете релации 1:N от **Стандартна длъжност** към обектите **Запис за време** **Действителни данни**, **Подробности за ред на фактура** и **Счетоводен запис**.

> ![Добавяне на стандартна длъжност като поле за препратка към запис за време.](media/ST-Mapping.png)

### <a name="set-up-dimension-value-defaulting-using-the-mappings-features-of-the-platform"></a>Настройване на стойността на измерение по подразбиране с помощта на функциите за съпоставяне на платформата
За запис за време би било полезно системата да задава по подразбиране стандартна длъжност в записа за време от наличния ресурс, който записва записа за време. Използвайте следващите стъпки, за да добавите съпоставяния на полета на релация 1:N от **Наличен ресурс** към **Запис за време**.

1. В мениджъра на решения, в левия навигационен екран, изберете **Обекти > Стандартна длъжност**.
2. Разгънете обекта **Стандартна длъжност** и изберете **Релации 1:N**.
3. Щракнете двукратно върху **Наличен ресурс към запис за време**. На страницата **Релация** щракнете върху **Използване на съпоставяния на полета**. 
4. Щракнете върху **Нов**, за да създадете ново съпоставяне на полена между полето **Стандартна длъжност** в обекта **Наличен ресурс** към полето за препратка **Стандартна длъжност** в обекта **Запис за време**. 

> ![Настройка на съпоставяния на полета за разрешаване на задаване по подразбиране на стандартна длъжност от наличен ресурс към запис за време.](media/ST-Mapping2.png)


Това завършва промените на схемата, необходими за персонализираните измерения, базирани на обекти.

##  <a name="add-custom-fields-to-forms-views-and-business-rules"></a>Добавяне на персонализирани полета към формуляри, изгледи и бизнес правила

След като сте направили всички необходими промени на схемата, следващата стъпка е да направите полетата видими в потребителския интерфейс, като добавите полетата към формулярите и изгледите.

1. Отворете формуляра или изгледа. В десния навигационен екран изберете полето и го плъзнете към платното на формуляра. 
2. Ако редактирате изглед, използвайте десния навигационен екран, щракнете върху **Добавяне на полета** и в диалоговия прозорец **Изброяване на полета** изберете необходимите полетата и щракнете върху **OK**.

Следната таблица предоставя изчерпателен списък на стандартни формуляри и изгледи по обекти, които ще трябва да бъдат актуализирани с новите полета. Ако имате допълнителни изгледи или формуляри във вашите персонализации на тези обекти, добавете и новите полета към тези.

| Обект на Project Service        | Формуляри, които се нуждаят от новото поле   |Изгледи, които се нуждаят от новото поле      |
| ------------------------------|---------------------------------|----------------------------------|
|  Цена на роля|• Информация |• Цени на категории активни ресурси<br> • Свързан изглед на цени на категории ресурси|
|  Надценка над цена на роля|• Информация|• Активна надценка над цена на роля<br>• Свързан изглед на надценка над цена на роля|
|  Подробности за ред на оферта|• Информация за проекта<br>• Бързо създаване на проект|• Подробности за активен за ред на оферта<br>• Подробности за комбиниран ред на оферта<br>• Свързан изглед на подробности за ред на оферта|
|  Подробности за ред на договор по проект|• Информация за проекта<br>• Бързо създаване на проект|• Подробности за комбиниран ред на договор<br>• Подробности за активен ред на договор<br>• Свързан изглед на подробности за ред на договор|
|  Задача от проект|• Информация<br>• Нов формуляр||
|  Член на екипа на проект|• Информация<br>• Нов формуляр|• Активни членове на екип на проект<br>• Членове на екип на проект<br>• Свързан изглед на членове на екип на проект|
|  Запис за време|• Информация<br>• Създаване на запис за време|• Моите записи за време по дата<br>• Моите записи за време за тази седмица<br>• Записи за време за одобрение|
|  Счетоводен запис|• Информация<br>• Бързо създаване|• Активни счетоводни записи<br>• Свързан изглед на счетоводни записи|
|  Подробности за ред на фактура|• Информация<br>• Бързо създаване|• Подробности за активен ред на фактура<br>• Платими транзакции по фактура<br>• Бонусни трансакции по фактура<br>• Свързан изглед на подробности за ред на фактура<br>• Неплатими транзакции по фактура|
|  Действителни данни|• Информация<br>• Активни действителни данни|• Свързан изглед на действителни данни|

Персонализираните полета може също да трябва да се добавят в бизнес правила в зависимост от това, което сте дефинирали. Един стандартен пример е за бизнес правилото **Възможност за редактиране на запис за време, базиран на състояние**. Това правило определя кои полета трябва да бъдат заключени, когато записът за време е в нередактируемо състояние, като например **Одобрено**. Добавяне на полета към това бизнес правило, така че полетата да са заключени за редактиране, когато записът за време е в състояние, различно от **Чернова** или **Върнато**.


[!INCLUDE[footer-include](../includes/footer-banner.md)]