---
title: Бизнес транзакции
description: Тази тема предоставя информация относно бизнес транзакциите.
author: rumant
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 03/01/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 3a8506effc453280177d74f94dcf9310e310c098
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 02/10/2021
ms.locfileid: "5149890"
---
# <a name="business-transactions"></a>Бизнес транзакции

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

В Dynamics 365 Project Service Automation *бизнес транзакция* е абстрактна концепция, която не е представена от никой обект. Някои общи полета и процеси в обекти обаче са проектирани да използват концепцията за бизнес транзакции. Следните обекти използват тази абстракция:

- Подробности за ред на оферта
- Подробности за ред на договор
- Редове на прогнозни оценки
- Счетоводни записи
- Действителни данни

От тези обекти „Подробности за ред на оферта“, „Подробности за ред на договор“ и „Редове на прогнозни оценки“ се съпоставят с фазата на оценяване в жизнения цикъл на проекта. Обектите „Счетоводни записи“ и „Действителни данни“ се съпоставят с фазата на изпълнение в жизнения цикъл на проекта.

PSA третира записите в тези пет обекта като бизнес транзакции. Единствената разлика е, че записите в обекти, които се съпоставят с фазата на оценяване, се считат за финансови прогнози, докато записите в обекти, които се съпоставят с фазата на изпълнение, се считат за финансови факти, които вече са настъпили.

За повече информация вижте [Прогнозни оценки](estimates.md) и [Действителни данни](actuals.md).

## <a name="concepts-that-are-unique-to-business-transactions"></a>Концепции, които са уникални за бизнес транзакциите
Следните концепции са уникални за концепцията на бизнес транзакциите:

- Тип транзакция
- Клас на транзакция
- Произход на транзакция
- Връзка на транзакция

### <a name="transaction-type"></a>Тип транзакция

Типът транзакция представлява времето и контекстът на финансовото отражение върху даден проект. Той е представен от набор от опции, който има следните поддържани стойности в PSA:
- Разходи
- Договор по проект
- Нефактурирани продажби
- Фактурирани продажби
- Продажби между организации
- Разход на ресурсна единица

### <a name="transaction-class"></a>Клас на транзакция

Класът на транзакция представлява различните видове разходи, които са направени по проекти. Той е представен от набор от опции, който има следните поддържани стойности в PSA:

- Време
- Разход
- Материал
- Такса
- Контролна точка
- Данък

Стойността на **Контролна точка** обикновено се използва от бизнес логиката за фактуриране на фиксирана цена в PSA.

### <a name="transaction-origin"></a>Произход на транзакция

Произходът на трансакцията е обект, което съхранява произхода на всяка бизнес трансакция. С изпълнението на проекта всяка бизнес транзакция ще доведе до друга бизнес транзакция, която от своя страна ще създаде друга и така нататък. Обектът на произход на транзакцията е проектиран да съхранява данни за произхода на всяка транзакция, за да помогне за отчитането и проследяването. 

### <a name="transaction-connection"></a>Връзка на транзакция

Връзка на транзакция е обект, който съхранява релацията между две подобни бизнес транзакции, като например разходи и свързани действителни данни за продажбите, или сторнирания на транзакции, които са предизвикани от операции за фактуриране, като например потвърждение на фактура или корекции на фактура.

Заедно обектите „Произход на транзакция“ и „Връзка на транзакции“ ви помагат да проследявате релации между бизнес транзакции и действия, които водят до създаването на конкретна бизнес транзакция.

### <a name="example-how-transaction-origin-works-with-transaction-connection"></a>Пример: как „Произход на транзакция“ работи с „Връзка на транзакция“

Следващият пример показва типичната обработка на записи за време в жизнения цикъл на проекта в PSA.

> ![Обработка на записи за време в жизнения цикъл на Project Service](media/basic-guide-17.png)
 
1. Подаването на запис за време води до създаването на два счетоводни записа: един за разход и един за нефактурирани продажби.
2. Окончателното одобрение на записа за време води до създаването на две действителни данни: един за разход и един за нефактурирани продажби.
3. Когато потребителят създава фактура за проект, транзакцията на реда на фактура се създава с помощта на действителните данни за нефактурирани продажби. 
4. Когато фактурата се потвърди, се създават две нови действителни данни: за сторниране на нефактурирани продажби и за фактурирани продажби.

Всяко от тези събития задейства създаването на записи в обектите „Произход на транзакция“ и „Връзка на транзакция“ за изграждане на проследяване на релации между тези записи, които са създадени по подробностите за запис за време, счетоводен запис, действителни данни и ред на фактура.

Следваща таблица показва записите в обекта „Произход на транзакция“ за предходния работен поток.

| Събитие                        | Произход                   | Тип произход                       | Транзакция                       | Тип транзакция         |
|------------------------------|--------------------------|-----------------------------------|-----------------------------------|--------------------------|
| Подаване на запис за време        | GUID на запис на запис за време   | Запис за време                        | GUID на запис на счетоводен запис (разходи)   | Счетоводен запис             |
| GUID на запис на запис за време       | Запис за време               | GUID на запис на счетоводен запис (продажби)  | Счетоводен запис                      |                          |
| Одобрение на времето                | GUID на запис на счетоводен запис | Счетоводен запис                      | GUID на запис на нефактурирани продажби        | Действителни данни                   |
| GUID на запис на запис за време       | Запис за време               | GUID на запис на нефактурирани продажби        | Действителни данни                            |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на запис на действителни данни за разходи           | Действителни данни                            |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на запис на действителни данни за разходи           | Действителни данни                            |                          |
| Създаване на фактура             | GUID на запис на запис за време   | Запис за време                        | GUID на транзакция по ред на фактура     | Транзакция по ред на фактура |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на транзакция по ред на фактура     | Транзакция по ред на фактура          |                          |
| Потвърждаване на фактура         | GUID на ред на фактура        | Ред на фактура                      | GUID на запис на фактурирани продажби          | Действителни данни                   |
| GUID на фактура                 | Фактура                  | GUID на запис на фактурирани продажби          | Действителни данни                            |                          |
| GUID на подробности за ред на фактура     | Подробности за ред на фактура      | GUID на запис на фактурирани продажби          | Действителни данни                            |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на запис на фактурирани продажби          | Действителни данни                            |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на запис на фактурирани продажби          | Действителни данни                            |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на сторниране на нефактурирани продажби      | Действителни данни                            |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на сторниране на нефактурирани продажби      | Действителни данни                            |                          |
| Корекция на чернова на фактура     | GUID на стари подробности за ред на фактура             | Транзакция по ред на фактура          | GUID на корекция на подробности за ред на фактура               | Транзакция по ред на фактура |
| GUID на стар ред на фактура                  | Ред на фактура             | GUID на корекция на подробности за ред на фактура               | Транзакция по ред на фактура          |                          |
| GUID на стара фактура             | Фактура                  | GUID на корекция на подробности за ред на фактура               | Транзакция по ред на фактура          |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на корекция на подробности за ред на фактура               | Транзакция по ред на фактура          |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на корекция на подробности за ред на фактура               | Транзакция по ред на фактура          |                          |
| Потвърдена корекция на фактурата | GUID на стари подробности за ред на фактура             | Транзакция по ред на фактура          | GUID на действителни данни за отменени фактурирани продажби | Действителни данни                   |
| GUID на стар ред на фактура                  | Ред на фактура             | GUID на действителни данни за отменени фактурирани продажби | Действителни данни                            |                          |
| GUID на стара фактура             | Фактура                  | GUID на действителни данни за отменени фактурирани продажби | Действителни данни                            |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на действителни данни за отменени фактурирани продажби | Действителни данни                            |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на действителни данни за отменени фактурирани продажби | Действителни данни                            |                          |
| GUID на стари подробности за ред на фактура                 | Транзакция по ред на фактура | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на стар ред на фактура                  | Ред на фактура             | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на стара фактура             | Фактура                  | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на запис на запис за време       | Запис за време               | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на запис на счетоводен запис     | Счетоводен запис             | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на корекция на подробности за ред на фактура          | Транзакция по ред на фактура | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на корекция на IL           | Ред на фактура             | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |
| GUID на корекция на фактура      | Фактура                  | GUID на действителни данни на нови нефактурирани продажби    | Действителни данни                            |                          |

Следващата таблица показва записите в обекта „Връзка на транзакция“ за предходния работен поток.

| Събитие                          | Транзакция 1                 | Роля на транзакция 1 | Тип на транзакция 1           | Транзакция 2                | Роля на транзакция 2 | Тип на транзакция 2 |
|--------------------------------|-------------------------------|--------------------|------------------------------|------------------------------|--------------------|--------------------|
| Подаване на запис за време          | GUID на счетоводен запис (продажби)     | Нефактурирани продажби     | msdyn_journalline            | GUID на счетоводен запис (разходи)     | Разходи               | msdyn_journalline  |
| Одобрение на времето                  | GUID на действителни данни на нефактурирани (продажби)  | Нефактурирани продажби     | msdyn_actual                 | GUID на действителни данни за разходи (разходи)       | Разходи               | msdyn_actual       |
| Създаване на фактура               | GUID на подробности за ред на фактура      | Фактурирани продажби       | msdyn_invoicelinetransaction | GUID на действителни данни на нефактурирани продажби   | Нефактурирани продажби     | msdyn_actual       |
| Потвърждаване на фактура           | GUID на сторниране на действителни данни         | Сторниране          | msdyn_actual                 | GUID на оригинални нефактурирани продажби | Оригинал           | msdyn_actual       |
| GUID на фактурирани продажби              | Фактурирани продажби                  | msdyn_actual       | GUID на действителни данни на нефактурирани продажби   | Нефактурирани продажби               | msdyn_actual       |                    |
| Корекция на чернова на фактура       | GUID на транзакция по ред на фактура | Замяна          | msdyn_invoicelinetransaction | GUID на фактурирани продажби            | Оригинал           | msdyn_actual       |
| Потвърждаване на корекция на фактура     | GUID на сторниране на фактурирани продажби    | Сторниране          | msdyn_actual                 | GUID на фактурирани продажби            | Оригинал           | msdyn_actual       |
| GUID на действителни данни на нови нефактурирани продажби | Замяна                     | msdyn_actual       | GUID на фактурирани продажби            | Оригинал                     | msdyn_actual       |                    |
