---
title: Разширяване на времеви записи
description: Тази статия предоставя информация за това как разработчиците са в състояние да разширят контролата за въвеждане на време.
author: stsporen
ms.date: 01/27/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: stsporen
ms.openlocfilehash: 7ed501af3fb2059ab3c3ab6f6c957fe518595d55
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/03/2022
ms.locfileid: "8914757"
---
# <a name="extending-time-entries"></a>Разширяване на времеви записи

_**Отнася се за:** Project Operations за сценарии, базирани на ресурси / без складови наличности, внедряване на Lite - сделка с проформа фактуриране_

Dynamics 365 Project Operations включва персонализиран контрол за въвеждане на време. Тази контрола включва следните функции:

- Въведете време хоризонтално за една седмица
- Общо за ден, ред или седмица
- Копирайте редове или седмици
- Въвеждане на време през HH: mm или HH.hh (автоматично се преобразува в HH.hh)
- Импортиране от задания, резервации или срещи

Удължаването на времето за въвеждане е възможно в две области:
- [Добавете персонализирани записи за време за собствена употреба](#add)
- [Персонализиране на контролата за седмичния времеви запис](#customize)

## <a name="add-custom-time-entries-for-your-own-use"></a><a name="add"></a>Добавете персонализирани записи за време за собствена употреба

Въвеждането на времето е основна същност, използвана в множество сценарии. През априлска вълна 1 2020 беше представено основното решение на TESA. TESA предоставя обект **Настройки** и нова роля на защита **Потребител за времеви запис**. Новите полета **msdyn_start** и **msdyn_end**, които имат пряко отношение към **msdyn_duration**, също са включени. Новият обект, права за достъп, и полетата позволяват по-унифициран подход към времето в множество продукти.


### <a name="time-source-entity"></a>Обект на източник на време
| Поле | Описание | 
|-------|------------|
| Име  | Името на записа на източника на време, използван като стойност за избор при създаването на времеви записи. |
| Източник на време по подразбиране [Източник на време: isdefault] | По подразбиране само един източник на време може да бъде маркиран по подразбиране. Това позволява на записите по подразбиране да бъдат източник на време, ако такъв не е посочен. |
|Тип източник на време [Източник на време: тип източник] | Типът източник е опция (тип източник на времеви запис), която позволява свързването на източника на време с приложение. Microsoft запазва стойности, по-големи от 190 000 000.|


### <a name="time-entries-and-the-time-source-entity"></a>Въвеждане на време и обект на източника на време
Всеки запис на време е свързан със запис на източник на време. Този запис определя кои приложения трябва да обработват записа за време и как.

Въвеждането на времето винаги е един непрекъснат блок от време със свързани началото, края и продължителността.

Логиката автоматично ще актуализира записа за въвеждане на време в следните ситуации:

- Ако са предоставени две от трите следващи полета, третото се изчислява автоматично: 

    - **msdyn_start**
    - **msdyn_end**
    - **msdyn_duration**

- **Полетата msdyn_start** и **msdyn_end** са наясно с часовата зона.
- Записи във времето, създадени само с **msdyn_date** и **msdyn_duration** посоченото ще започне в полунощ. Полетата **msdyn_start** и **msdyn_end** ще се актуализират съответно.

#### <a name="time-entry-types"></a>Типове времеви записи

Записите за въвеждане на време имат асоцииран тип, който определя поведението в потока на подаване за свързаното приложение.

|Етикет | Стойност|
|-----|-----|
|При почивка   |192,355,000|
|Пътуване | 192,355,001|
|Извънреден труд   | 192,354,320|
|Работа   | 192,350,000|
|Отсъствие    | 192,350,001|
|Отпуска   | 192,350,002|


## <a name="customize-the-weekly-time-entry-control"></a><a name="customize"></a>Персонализиране на контролата за седмичния времеви запис
Разработчиците могат да добавят допълнителни полета и справки към други обекти и да прилагат персонализирани бизнес правила в подкрепа на своите бизнес сценарии.

### <a name="add-custom-fields-with-lookups-to-other-entities"></a>Добавяне на персонализирани полета със справочни полета за други обекти
Има три основни стъпки за добавяне на персонализирано поле към мрежата на седмични записи за време.

1. Добавете персонализираното поле към **диалоговия прозорец Бързо създаване**.
2. Конфигурирайте мрежата, за да се показва персонализираното поле.
3. Добавете персонализираното поле към страницата за редактиране **на** редове или **запис** "Час", според случая.

Уверете се, че новото поле има необходимите валидации на **страницата за редактиране** на редове или **запис** за време. Като част от тази задача заключете полето, въз основа на състоянието на записа за време.

Когато добавите персонализирано поле към **мрежата за записи** "Време" и след това създадете записи за време директно в мрежата, полето по избор за тези записи автоматично се задава така, че да съответства на реда. 

### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a>Добавяне на персонализираното поле към диалоговия прозорец Бързо създаване
Добавете персонализираното поле към **диалоговия прозорец Бързо създаване: Създаване на запис** за време. След това потребителите могат да въведат стойност, когато добавят записи за време, като избират **Създаване**.

### <a name="configure-the-grid-to-show-the-custom-field"></a>Конфигуриране на мрежата, за да се показва персонализираното поле
Има два начина за добавяне на персонализирано поле към **мрежата за записи** за седмично време.

- Персонализирайте изгледа **"Моите седмични записи** за час" и добавете персонализираното поле към него. Можете да зададете позицията и размера на персонализираното поле в мрежата, като редактирате свойствата в изгледа.
- Създайте нов изглед на запис по избор за време и го задайте като изглед по подразбиране. Този изглед трябва да съдържа **полетата Описание** и **Външни коментари** в допълнение към колоните, които искате мрежата да включва. Можете да зададете реда на сортиране на позицията, размера и сортирането по подразбиране на мрежата, като редактирате свойствата в изгледа. След това конфигурирайте персонализираната контрола за този изглед, така че да е контрола **Мрежа за записи за време**. Добавете контролата към изгледа и я изберете за **Уеб**, **Телефон** и **Таблет**. След това конфигурирайте параметрите за мрежата за **запис** седмично време. Задайте **полето Начална дата** на msdyn **дата\_**, задайте **полето** Продължителност **на продължителност\_ msdyn** и задайте **полето** Състояние **на msdyn\_ записстатус**. Полето **Списък** на състоянието само за четене е зададено на **192350002 (Одобрен)**, **192350003 (Подаден)** или **192350004 (Поискано припомняне)**.

### <a name="add-the-custom-field-to-the-appropriate-edit-page"></a>Добавяне на персонализираното поле към съответната страница за редактиране
Страниците, които се използват за редактиране на запис за време или ред от записи за време, могат да бъдат намерени под **Формуляри**. Бутонът **За редактиране на запис** в мрежата отваря **страницата Редактиране на записа**, а бутонът Редактиране на **ред** отваря страницата за редактиране **на** ред. Можете да редактирате тези страници, така че да включват персонализирани полета.

И двете опции премахват някои филтриране извън кутията на **обектите "Проект** " и **"Проектна задача** ", така че да се виждат всички справочни изгледи за обектите. Стандартно се виждат само съответните справочни изгледи.

Трябва да определите подходящата страница за персонализираното поле. Най-вероятно, ако сте добавили полето към мрежата, то трябва да отиде на страницата за редактиране **на** ред, която се използва за полета, които се отнасят за целия ред записи за време. Ако персонализираното поле има уникална стойност в реда всеки ден (например, ако е персонализирано поле за крайния час), то трябва да отиде на **страницата за редактиране** на запис "Време".

За да добавите персонализираното поле към страница, плъзнете **елемент на Поле** в съответната позиция на страницата и след това задайте свойствата му.

### <a name="add-new-option-set-values"></a>Добавяне на стойности на нов набор от опции
За да добавите стойности за набор от опции към поле извън кутия, изпълнете следните стъпки.

1. Отворете страницата за редактиране за полето и след това под **Тип** изберете **Редактиране** до набора от опции.
2. Добавете нова опция, която има персонализиран етикет и цвят. Ако искате да добавите ново състояние на запис за време, полето "Извън кутия" се казва **"Състояние** на запис".

### <a name="designate-a-new-time-entry-status-as-read-only"></a>Обозначаване на ново състояние на запис за време като само за четене
За да обозначите ново състояние на запис за време като само за четене, добавете новата стойност на записа за време в свойството **Списък със състояния само за четене**. Не забравяйте да добавите номера, а не етикета. Редакцивната част от мрежата за въвеждане на време вече ще бъде заключена за редове, които имат новото състояние. За да зададете свойството **Списък** на състоянието само за четене по различен начин за различни **изгледи на записи** за време, добавете **мрежата за записи** за време в секцията "Потребителски контроли **" на изглед** и конфигурирайте параметрите според случая.

След това добавете бизнес правила, за да заключите всички полета в **страниците за редактиране** на редове **и** запис "Час". За достъп до бизнес правилата за тези страници отворете редактор на формуляри за всяка страница и след това изберете **Бизнес правила**. Можете да добавите новото състояние към условието в съществуващите бизнес правила или да добавите ново бизнес правило за новото състояние.

### <a name="add-custom-validation-rules"></a>Добавяне на персонализирани правила за валидиране
Можете да добавите два типа правила за проверка за **опита на седмичната времева мрежа за записи**:

- Бизнес правила от страна на клиента, които работят на страници
- Проверка на добавката от страна на сървъра, които се отнасят за всички актуализации на въвеждането във времето

#### <a name="client-side-business-rules"></a>Бизнес правила от страна на клиента
Използвайте бизнес правила, за да заключвате и отключвате полета, въвеждате стойности по подразбиране в полетата и дефинирате валидации, които изискват информация само от записа на текущия запис за време. За достъп до бизнес правилата за дадена страница отворете редактор на формуляри и след това изберете **Бизнес правила**. След това можете да редактирате съществуващите бизнес правила или да добавите ново бизнес правило.

#### <a name="server-side-plug-in-validations"></a>Проверка на добавката от страната на сървъра
Трябва да използвате валидации на добавка за всякакви валидации, които изискват повече контекст, отколкото е наличен в един запис за запис за време. Също така трябва да ги използвате за всякакви валидации, които искате да изпълнявате на инлайн актуализации в мрежата. За да завършите валидациите, създайте персонализирана добавка в **обекта Запис за време**.

### <a name="limits"></a>Ограничения
В момента **мрежата за записи** "Време" има ограничение на размера от 500 реда. Ако има повече от 500 реда, излишните редове няма да се показват. Няма начин да се увеличи този лимит за размер.

### <a name="copying-time-entries"></a>Копиране на времеви записи
Използвайте изгледа **Копирайте колони за въвеждане на време** за да дефинирате списъка с полетата за копиране по време на въвеждане на време. **Дата** и **Продължителност** са задължителни полета и не трябва да се премахват от изгледа.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
