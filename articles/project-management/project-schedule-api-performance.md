---
title: Производителност на API за планиране на проекти
description: Тази статия предоставя информация за референтните показатели за ефективност на API за график на проекта и идентифицира най-добрите практики за оптимално използване.
author: ruhercul
ms.date: 11/03/2021
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 1ee1bd8e4412ee1d10f445628c5dc87cc9fa91d3
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/03/2022
ms.locfileid: "8911169"
---
# <a name="project-schedule-api-performance"></a>Производителност на API за планиране на проекти

_**Отнася се за:** Project Operations за сценарии, базирани на ресурси/без складове, леко внедряване - фактуриране по проформа, Project for the Web_

Тази статия предоставя информация за бенчмарковете за ефективност на програмните интерфейси на Project schedule application (API) и идентифицира най-добрите практики за оптимизиране на използването.

## <a name="project-scheduling-service"></a>Услуга за планиране на проекти
Услугата за планиране на проекти е услуга с множество наематели, която се изпълнява в Microsoft Azure. Той е предназначен да подобри взаимодействието, като предоставя бързо и плавно изживяване, когато потребителите работят по проекти. Това подобрение се постига чрез приемане на заявки за промяна, обработката им и след това незабавно връщане на резултата. Услугата асинхронно се запазва в Dataverse и не блокира потребителите да извършват други операции.

API за график на проекта разчитат на услугата за планиране на проекти за изпълнение на заявки, които са описани по-подробно в по-късните раздели на тази статия.

Приложните програмни интерфейси (API) за график на проекта са проектирани да работят със следните обекти на структурата за разбивка на работата (WBS):

  - Project
  - Задача по проект
  - Зависимост на задачи от проект
  - Член на екипа на проект
  - Назначаване на ресурс
  
Поддържат се както полета извън кутията, така и персонализирани полета. Освен ако не е отбелязано друго, се поддържат всички общи операции, като създаване, актуализиране и изтриване. За повече информация вижте [Използвайте API за график на проекта за извършване на операции и обекти за планиране](schedule-api-preview.md).

Като част от API на графика на проекта е добавен модел на единица работа. Този модел е известен като OperationSet и може да се използва, когато няколко заявки трябва да бъдат обработени в една транзакция.

Следващата илюстрация показва потока, който партньорът ще изпита, когато се използва тази функция.

![Dataverse и поток за услуга за планиране на проект.](./media/dataverse-project-scheduling-service-flow.png)

**Етап 1**: Клиент извършва извикване на API към крайна точка на Open Data Protocol (OData) в Dataverse, за да създадете OperationSet.

**Стъпка 2**: След като е създаден новият OperationSet, се връща стойност **OperationSetId**.

**Стъпка 3**: Клиентът използва **OperationSetId** стойност, за да направите друга заявка за API на график на проекта. Резултатът е заявка за създаване, актуализиране или изтриване на обект за планиране. Когато се направи тази заявка, се извършва валидиране на метаданни. Ако проверката не успее, заявката се прекратява и се връща грешка.

**Стъпки 4a–4c**: Тези стъпки представляват фазата ACCEPT. Клиентът се обажда на **ExecuteOperationSetV1** API, който изпраща всички промени в услугата за планиране на проекти в една партида. Услугата за планиране на проекти изпълнява свои собствени валидации на заявки в пакета. Всички неуспехи при валидиране отменят партидата и връщат изключение на повикващия. Ако партидата бъде успешно приета от услугата за планиране на проекти, състоянието на OperationSet се актуализира, за да отразява факта, че OperationSet се обработва от услугата за планиране на проекти.

**Стъпка 5**: Тази стъпка представлява фазата PERSIST. Услугата за планиране на проекти асинхронно записва партидата в Dataverse в сделка. Ако операцията на запис е успешна, OperationSet се маркира като **Завършено**. Всички грешки връщат обратно транзакцията и партидата и OperationSet се маркира като **Се провали**.

## <a name="performance-methodology"></a>Методология за изпълнение
Времето за изпълнение се дефинира като времето от повикването до **ExecuteOperationSetV1** API, докато услугата за планиране на проекти приключи с писането на Dataverse. Всички операции се изпълняват комбинирано 2200 пъти и се отчитат измерванията на времето за изпълнение на P99. Измерват се операции с единичен запис и групови операции.

За операция с един запис, OperationSet съдържа една заявка. За групови операции съдържа 20, 50 или 100 заявки. Всеки насипен размер се отчита отделно.

Тези операции се изпълняват при внедряване на UR 15 Project Operations Lite в Северна Америка.

## <a name="results"></a>Резултати
### <a name="create-operations"></a>Операции по създаване
#### <a name="single-record-create-operations"></a>Операции за създаване на единичен запис
Следващата таблица показва времената за изпълнение за създаването на един запис. Времената са в секунди.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип&nbsp;&nbsp;&nbsp;запис</th>
    <th class="tg-0lax" colspan="2">Време</th>
  </tr>
  <tr>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">2.5</td>
    <td class="tg-0lax">3.78</td>
  </tr>
  <tr>
    <td class="tg-0lax">Задача</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">Присвояване</td>
    <td class="tg-0lax">9.19</td>
    <td class="tg-0lax">9.19</td>
  </tr>
  <tr>
    <td class="tg-0lax">Член на екипа</td>
    <td class="tg-0lax">0.84</td>
    <td class="tg-0lax">4.2</td>
  </tr>
  <tr>
    <td class="tg-0lax">Зависимост</td>
    <td class="tg-0lax">8.84</td>
    <td class="tg-0lax">8.84</td>
  </tr>
</tbody>
</table>

#### <a name="bulk-create-operations"></a>Операции за групово създаване
Следващата таблица показва времената за изпълнение за създаването на много записи. По-конкретно, Microsoft измерва времето за изпълнение за създаване на 20, 50 и 100 записа в един OperationSet. Времената са в секунди.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">Тип&nbsp;&nbsp;&nbsp;запис</th>
    <th class="tg-0lax" colspan="6">Време</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 записа</th>
    <th class="tg-0lax" colspan="2">50 записа</th>
    <th class="tg-0lax" colspan="2">100 записа</th>
  </tr>
  <tr>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Задача</td>
    <td class="tg-0lax">19.92</td>
    <td class="tg-0lax">38.35</td>
    <td class="tg-0lax">36.67</td>
    <td class="tg-0lax">99.13</td>
    <td class="tg-0lax">116.77</td>
    <td class="tg-0lax">174.06</td>
  </tr>
  <tr>
    <td class="tg-0lax">Присвояване</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">69.38</td>
    <td class="tg-0lax">69.38</td>
  </tr>
  <tr>
    <td class="tg-0lax">Зависимост</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">176.89</td>
    <td class="tg-0lax">176.89</td>
  </tr>
</tbody>
</table>

> [!NOTE] 
> Операции за групово създаване на **Проект** и **Член на екипа** обекти не са включени в тази таблица, тъй като времето за изпълнение на тези операции прилича на времето за изпълнение, когато API за създаване на един запис се извиква няколко пъти. Тези API се изпълняват незабавно в Dataverse.

Следващата илюстрация показва графика на времената на изпълнение за **Задача**, **Възлагане** и **Зависимост** обекти, когато са създадени 20, 50 и 100 записа и се използват всички поддържани полета.

![Създайте графика на времето за изпълнение на записа.](./media/create-record-execution-time.png)

### <a name="update-operations"></a>Операции по актуализиране
#### <a name="single-record-update-operations"></a>Операции за актуализиране на единичен запис
Следващата таблица показва времената за изпълнение за актуализациите на един запис. Времената са в секунди.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип&nbsp;&nbsp;&nbsp;запис</th>
    <th class="tg-0lax" colspan="2">Време</th>
  </tr>
  <tr>
    <th class="tg-0lax">Задължителни полета </th>
    <th class="tg-0lax">Всички поддържани полета</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">9.53</td>
    <td class="tg-0lax">13.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">Задача</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">Член на екипа</td>
    <td class="tg-0lax">9</td>
    <td class="tg-0lax">8.96</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Операции за актуализиране на **Ресурсни задания** и **Зависимост от задачи на проекта** обекти не се поддържат.

#### <a name="bulk-update-operations"></a>Операции за групово актуализиране
Следващата таблица показва времената за изпълнение за актуализирането на много записи. По-конкретно, Microsoft измерва времето за изпълнение за актуализиране на 20, 50 и 100 записа в един OperationSet. Времената са в секунди.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">Тип&nbsp;&nbsp;&nbsp;запис</th>
    <th class="tg-0lax" colspan="6">Време</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 записа</th>
    <th class="tg-0lax" colspan="2">50 записа</th>
    <th class="tg-0lax" colspan="2">100 записа</th>
  </tr>
  <tr>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
    <th class="tg-0lax">Задължителни полета</th>
    <th class="tg-0lax">Всички поддържани полета</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Задача</td>
    <td class="tg-0lax">8.91</td>
    <td class="tg-0lax">38.71</td>
    <td class="tg-0lax">20.92</td>
    <td class="tg-0lax">87.13</td>
    <td class="tg-0lax">36.68</td>
    <td class="tg-0lax">190.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">Член на екипа</td>
    <td class="tg-0lax">20.52</td>
    <td class="tg-0lax">26.06</td>
    <td class="tg-0lax">41.93</td>
    <td class="tg-0lax">44.51</td>
    <td class="tg-0lax">38.63</td>
    <td class="tg-0lax">66.53</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Операции за актуализиране на **Ресурсни задания** и **Зависимост от задачи на проекта** обекти не се поддържат.

Следващата илюстрация показва графика на времената на изпълнение за обектите Задача и Член на екипа, когато са актуализирани 20, 50 и 100 записа и се използват всички поддържани полета.

![Актуализирайте графика на времето за изпълнение на записа.](./media/update-record-execution-time.png)

### <a name="delete-operations"></a>Изтриване на операции
#### <a name="single-record-delete-operations"></a>Операции за изтриване на единичен запис
Следващата таблица показва времената за изпълнение за изтриването на един запис. Времената са в секунди.

| Тип на записа | Време  |
|-------------|-------|
| Задача        | 20.12 |
| Присвояване  | 10.86 |
| Член на екипа | 12.52 |
| Зависимост  | 20.89 |

> [!NOTE]
> Изтриване на операции на **Проект** обект не се поддържат.

#### <a name="bulk-delete-operations"></a>Операции за групово изтриване
Следващата таблица показва времената за изпълнение за изтриването на много записи. По-конкретно, Microsoft измерва времето за изпълнение за изтриване на 20, 50 и 100 записа в един OperationSet. Времената са в секунди.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип&nbsp;&nbsp;&nbsp;запис</th>
    <th class="tg-0lax" colspan="3">Време</th>
  </tr>
  <tr>
    <th class="tg-0lax">20 записа</th>
    <th class="tg-0lax">50 записа</th>
    <th class="tg-0lax">100 записа</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Задача</td>
    <td class="tg-0lax">20.91</td>
    <td class="tg-0lax">67.43</td>
    <td class="tg-0lax">71.96</td>
  </tr>
  <tr>
    <td class="tg-0lax">Присвояване</td>
    <td class="tg-0lax">11.75</td>
    <td class="tg-0lax">25.79</td>
    <td class="tg-0lax">47.66</td>
  </tr>
  <tr>
    <td class="tg-0lax">Член на екипа</td>
    <td class="tg-0lax">9.78</td>
    <td class="tg-0lax">39.73</td>
    <td class="tg-0lax">24.33</td>
  </tr>
  <tr>
    <td class="tg-0lax">Зависимост</td>
    <td class="tg-0lax">24.61</td>
    <td class="tg-0lax">54.9</td>
    <td class="tg-0lax">109.16</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Изтриване на операции на **Проект** обект не се поддържат.

Следващата илюстрация показва графика на времената на изпълнение за **Задача**, **Възлагане**, **Член на екипа** и **Зависимост** обекти, когато са изтрити 20, 50 и 100 записа.

![Актуализирайте графика на времето за изтриване на записа.](./media/delete-record-execution-time.png)

## <a name="observations"></a>Наблюдения
За всяка операция по запис, **ExecuteOperationSet** API отнема около 800 милисекунди, за да изпрати заявка до услугата за планиране на проекти. След това услугата за планиране на проекти отнема около пет секунди, за да обработи полезния товар и да се обади на Dataverse. Останалото време за изпълнение се прекарва в изпълнение на бизнес логиката и запис на данни в базата данни в Dataverse.

Когато 100 записа бъдат създадени, актуализирани или изтрити, **ExecuteOperationSet** API отнема около три секунди, за да изпрати заявката до услугата за планиране на проекти. След това услугата за планиране на проекти отнема около пет секунди, за да обработи заявките и да се обади на Dataverse. Масовите операции трябва да плащат **Данък за услугата за планиране на проекти** еднократно за всички записи в OperationSet. Следователно груповите операции имат значително по-ниско средно време за изпълнение от операциите с един запис.

## <a name="scenarios"></a>Сценарии
Следващата таблица показва времената на изпълнение, когато API за график на проекта се използват за изпълнение на конкретни сценарии. Времената са в секунди.

| Сценарий                                                                   | Време  |
|----------------------------------------------------------------------------|-------|
| Създайте проект, който има 40 задачи.                                      | 36.01 |
| Създайте проект, който има 40 задачи и 20 зависимости.                  | 38.11 |
| Създайте проект, който има 40 задачи и 30 присвоявания.                   | 60.17 |
| Създайте проект, който има 40 задачи и 20 зависимости и 30 присвоявания. | 60.27 |

## <a name="best-practices"></a>Най-добри практики
Въз основа на резултатите от предходния сценарий, API се представят по-добре при следните условия:

  - Групирайте възможно най-много операции заедно. Средното време на изпълнение за групови операции е по-добро от средното време на изпълнение за операции с един запис. Колкото по-малък е броят на OperationSets, които се използват, толкова по-бързо ще бъде средното време за изпълнение.
  - Задайте само минималните атрибути, които са необходими за изпълнение на вашия сценарий. Бъдете избирателни относно типовете незадължителни полета, включени в заявка за OperationSet. Полетата, които съдържат външни ключове или сборни полета, ще повлияят негативно на производителността.
