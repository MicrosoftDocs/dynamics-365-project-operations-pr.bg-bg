---
title: Регистрационни файлове за планиране на проекти
description: Тази статия предоставя информация и извадки, които ще ви помогнат да използвате регистрационните файлове за планиране на проекти за проследяване на откази, които са свързани с API на услугата за планиране на проекти и планиране на проекти.
author: ruhercul
ms.date: 11/30/2021
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ruhercul
ms.openlocfilehash: c57419642e90e4def01f2cd2474c9e82dc162b86
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/03/2022
ms.locfileid: "8923682"
---
# <a name="project-scheduling-logs"></a>Регистрационни файлове за планиране на проекти

_**Отнася се за:** Операции по проекта за ресурси/не-заредени базирани сценарии, Разполагане на Lite - сделка за проформа фактуриране_, _Проект за уеб_

Microsoft Dynamics 365 Project Operations използва [Project за уеб](https://support.microsoft.com/office/what-is-project-for-the-web-c19b2421-3c9d-4037-97c6-f66b6e1d2eb5) като свой основен двигател за планиране. Вместо да използва стандартните Microsoft Dataverse програмни интерфейси за уеб приложения (API), Project Operations използва новите API за планиране на проекти за създаване, актуализиране и изтриване на задачи по проекти, задачи на ресурси, зависимости от задачи, кофи за проекти и членове на екипи по проекти. Въпреки това, когато създавате, актуализирате или изтривате операции програмно се изпълняват на работа разбивка структура (WBS) обекти, грешки може да възникне. За проследяване на тези грешки и хронологията на операциите са изпълнени два нови административни регистрационни файлове: **Операция Набор** и **Услуга за планиране на проекти (PSS)**. За да получите достъп до тези регистрационни файлове, отидете **на Интегриране** на график за \>**настройки**.

Следната илюстрация показва модела на данните за регистрационните файлове за планиране на проекти.

![Модел данни за регистрационните файлове за планиране на проекти.](media/LOGDATAMODEL.jpg)

## <a name="operation-set-log"></a>Регистър на набора операции

Регистрационният файл на operation Set проследява изпълнението на набор от операции, който се използва за изпълнение на една или много операции за създаване, актуализиране или изтриване в папка на проекти, задачи по проекта, задачи на ресурси, зависимости от задачи, кофи за проекти или членове на екипа на проекта. Полето **Операция в състояние** показва цялостното състояние на набора от операции. Подробностите за набора от операции полезни данни се улавят в свързани записи на Операция Задаване на подробни данни.

### <a name="operation-set"></a>Комплект операции

Следната таблица показва полетата, които са свързани с **обекта "Набор** от операции".

| Име на схема            | Описание                                                                                                  | DisplayName            |
|-----------------------|--------------------------------------------------------------------------------------------------------------|------------------------|
| msdyn_completedon     | Датата/часът, когато наборът от операции е завършен или неуспешен.                                                | CompletedOn            |
| msdyn_correlationid   | КорелационнатаИден **стойност** на искането.                                                                  | CorrelationId          |
| msdyn_description     | Описанието на набора от операции.                                                                        | Описание            |
| msdyn_executedon      | Датата/часът на изпълнение на записа.                                                                       | Изпълнено на            |
| msdyn_operationsetId  | Уникалният идентификатор на екземплярите на обект.                                                                   | OperationSet           |
| msdyn_Project         | Проектът, който е свързан с набора от операции.                                                            | Project                |
| msdyn_projectid       | Стойността на **projectId** на заявката.                                                                      | ProjectId (отхвърлено) |
| msdyn_projectName     | Неприложимо.                                                                                              | Неприложимо         |
| msdyn_PSSErrorLog     | Еднозначният идентификатор на регистрационния файл на услугата за планиране на проекти, който е свързан с набора от операции. | Регистрационен файл за грешки на PSS          |
| msdyn_PSSErrorLogName | Неприложимо.                                                                                              | Неприложимо         |
| msdyn_status          | Състоянието на набора от операции.                                                                             | Статус                 |
| msdyn_statusName      | Неприложимо.                                                                                              | Неприложимо         |
| msdyn_useraadid       | ИД Azure Active Directory на Azure AD обект на потребителя, към който принадлежи заявката.                     | UserAADID              |

### <a name="operation-set-detail"></a>Подробност на набора от операции

Следната таблица показва полетата, които са свързани с **обекта "Подробност** на набора от операции".

| Име на схема                 | Описание                                                                                 | DisplayName           |
|----------------------------|---------------------------------------------------------------------------------------------|-----------------------|
| msdyn_cdspayload           | Сериализираните Dataverse полета за заявката.                                            | CdsPayload            |
| msdyn_entityname           | Името на обекта за заявката.                                                     | EntityName            |
| msdyn_httpverb             | Методът на заявката.                                                                         | HTTPVerb (отхвърлено) |
| msdyn_httpverbName         | Неприложимо.                                                                             | Неприложимо        |
| msdyn_operationset         | Уникалният идентификатор на набора от операции, към който принадлежи записът.                      | OperationSet          |
| msdyn_operationsetdetailId | Уникалният идентификатор на екземплярите на обект.                                                  | Подробност за OperationSet   |
| msdyn_operationsetName     | Неприложимо.                                                                             | Неприложимо        |
| msdyn_operationtype        | Видът на операцията на зададената подробност на операцията.                                             | OperationType         |
| msdyn_operationtypeName    | Неприложимо.                                                                             | Неприложимо        |
| msdyn_psspayload           | Сериализираните полета на Услугата за планиране на проекти за заявката.                           | PssPayload            |
| msdyn_recordid             | Идентификаторът на записа на заявката.                                                       | ИД на запис             |
| msdyn_requestnumber        | Автоматично генериран номер, който идентифицира поръчката, в която са получени заявки. | Номер на заявка        |

## <a name="project-scheduling-service-error-logs"></a>Регистрационни файлове за грешки на услугата за планиране на проекти

Услугата за планиране на проекта регистрационни файлове улавяне откази, които възникват, когато услугата за планиране на проекта се опитва **запис** или **отвори** операция. Има три поддържани сценария, при които се генерират тези регистрационни файлове:

- Действията, инициирани от потребителя, критично не успяват (например не може да се създаде назначение поради липсващи привилегии).
- Услугата за планиране на проекти не може програмно да създава, актуализира, изтрива или извършва друга каскадна операция на обект.
- Потребителят изпитва грешки, когато даден запис не успее да се отвори (например при отваряне на проект или се актуализира информацията на член на екипа).

### <a name="project-scheduling-service-log"></a>Регистрационен файл на услугата за планиране на проекти

Следната таблица показва полетата, които са включени в регистрационния файл на услугата за планиране на проекти.

| Име на схема          | Описание                                                                    | DisplayName    |
|---------------------|--------------------------------------------------------------------------------|----------------|
| msdyn_CallStack     | Стекът на повикванията на изключението.                                               | Стек на повикванията     |
| msdyn_correlationid | Корелационният ИД на грешката.                                               | CorrelationId  |
| msdyn_errorcode     | Поле, което се използва за съхраняване на кода на Dataverse грешката или кода на HTTP грешката. | Код на грешка     |
| msdyn_HelpLink      | Връзка към публичната помощна документация.                                       | Връзка за помощ      |
| msdyn_log           | Регистрационният файл от услугата за планиране на проекти.                                   | Регистрационен файл            |
| msdyn_project       | Проектът, който е свързан с регистрационния файл за грешки.                             | Project        |
| msdyn_projectName   | Името на проекта, ако полезният товар на набора от операции ще се запази. | Неприложимо |
| msdyn_psserrorlogId | Уникалният идентификатор на екземплярите на обект.                                     | Регистрационен файл за грешки на PSS  |
| msdyn_SessionId     | ИД на сесията на проекта.                                                        | ИД на сесия     |

## <a name="error-log-cleanup"></a>Почистване на регистрационния файл за грешки

По подразбиране и двете регистрационни файлове за грешки на Project Scheduling Service и регистрационния файл на набора операции могат да се почистват на всеки 90 дни. Всички записи, които са по-стари от 90 дни, ще бъдат изтрити. Като променят обаче стойността на **полето за msdyn_StateOperationSetAge** на страницата Параметри **на** проекта, администраторите могат да регулират диапазона на почистване, така че да е между 1 и 120 дни. Няколко метода за промяна на тази стойност са налични:

- Персонализиране на **обекта "Параметър** на проекта", като създадете персонализирана страница и добавите полето Застояла **възраст на набора** операции.
- Използвайте клиентски код, който използва комплекта за разработване на [софтуер webApi (SDK)](/powerapps/developer/model-driven-apps/clientapi/reference/xrm-webapi/updaterecord).
- Използвайте Услугата SDK код, който използва Xrm SDK **актуализацияRecord** метод (клиент API препратка) в базирани на модел приложения. Power Apps включва описание и поддържани параметри за **метода updateRecord**.

    ```C#
    Xrm.WebApi.retrieveMultipleRecords('msdyn_projectparameter').then(function (response) {
        parameter = response.entities[0];
        var staleOperationValue = prompt("All records older than (x) days will be deleted, please enter X between 1 to 90 days", 1)
        var newData = {};
        newData.msdyn_projectparameterid = parameter.msdyn_projectparameterid;
        newData.msdyn_staleoperationsetage = parseInt(staleOperationValue);
        Xrm.WebApi.updateRecord("msdyn_projectparameter", parameter.msdyn_projectparameterid, newData).then(
            function success(result) {
                console.log("Project Parameter: Stale Operation Expiry is set to: " + newData.msdyn_staleoperationsetage);
                // perform operations on record update
                Xrm.WebApi.retrieveMultipleRecords('msdyn_projectparameter')
                .then(function (response2) { console.log("Confirmed Project Parameter: Stale Operation Expiry is set to: " + response2.entities[0].msdyn_staleoperationsetage) });
            },
            function (error) {
                console.log("Failed to Update Project Ednpoint with error: " + error.message);
            // handle error conditions
            }
        );
    });
    ```
