---
title: Мигриране на изцяло фактурирани етапи на фактуриране при преминаване към нова система
description: Тази статия обяснява как да мигрирате основни етапи на таксуване с фиксирана цена, които са били фактурирани на клиента за отворени договори за проекти преди датата на пускане в действие.
author: sigitac
ms.date: 01/10/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 05cd71f9860b5698e3a26bc72660b0b2044206c8
ms.sourcegitcommit: a798fed5c59e3fefa62cdfa42c852d529b33fd35
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/18/2022
ms.locfileid: "9028689"
---
# <a name="migrate-fully-invoiced-billing-milestones-at-cutover"></a>Мигриране на изцяло фактурирани етапи на фактуриране при преминаване към нова система

_**Прилага се за:** Project Operations за сценарии, базирани на ресурси/неналичност_

## <a name="scenario"></a>Сценарий

Contoso започва да работи с Microsoft Dynamics 365 Project Operations за сценарии с ресурси/без наличност. Като част от преходните дейности, екипът за внедряване трябва да мигрира отворените договори за проекти от старата система. Някои от проектните договори включват договорни линии, които използват метода на фактуриране с фиксирана цена и вече са частично фактурирани на крайния клиент. Екипът за внедряване трябва да мигрира тези основни етапи на фактуриране като **Фактурата на клиента е публикувана**, тъй като те трябва да бъдат включени в общата стойност на договора за целите на признаването на приходите. Въпреки това клиентските салда във Вземания и Главна книга не трябва да бъдат засегнати.

## <a name="solution"></a>Решение

### <a name="prerequisites"></a>Предварителни изисквания

- Трябва да се инсталира Dynamics 365 Finance 10.0.24 или по-нова версия.
- Средата, в която ще бъдат завършени стъпките за мигриране, трябва да е в режим на поддръжка. Не трябва да се извършват други дейности, докато етапите се мигрират.
- Стъпките на миграцията трябва да се следват точно както е описано тук и могат да се използват само за дейността по прекъсване. Microsoft не поддържа друго използване на тази възможност.

### <a name="create-a-cutover-version-of-the-project-operations-integration-contract-line-milestones-dual-write-map"></a>Създайте преходна версия на картата за двойно записване на основните етапи на договорната линия за интегриране на Project Operations 

1. Уверете се, че целевото картографиране за обекта **Важни етапи на договорната линия за интеграция на Project Operations** е актуално. 

    1. Във Финанси отидете на **Управление на данни** \> **Обекти на данни** и изберете обекта **Важни етапи на договорната линия за интеграция на Project Operations**. 
    2. Изберете **Промяна на целевите съпоставки**. 
    3. На страницата **Постановка на картата към целта** изберете **Генериране на картографиране** и след това потвърдете, че искате да генерирате картографирането.

2. Спрете и обновете картата за двойно записване **Основни етапи на договора за интеграция на Project Operations** (**msdyn\_contractlinescheduleofvalues**). 

    1. Отидете на **Управление на данни** \> **Двойно писане**, изберете картата и отворете подробностите за нея. 
    2. Изберете **Стоп** и изчакайте, докато системата спре картата. 
    3. Изберете **Обновяване на таблици**.

3. Добавете съпоставяне за състоянието на транзакцията.

    1. Изберете **Добавяне на картографиране**.
    2. На новата линия, в колоната **Приложения за финанси и операции** изберете полето **TRANSSTATUS \[TRANSSTATUS\]**.
    3. В колоната **Microsoft Dataverse** изберете **msdyn\_invoicestatus \[Invoice status\]**.
    4. В колоната **Тип карта** изберете стрелката надясно (**\>**).
    5. В диалоговия прозорец, който се появява, в **Посока на синхронизиране** поле, изберете **Dataverse към приложения за финанси и операции**.
    6. Изберете **Добавяне на трансформиране**.
    7. В полето **Тип трансформиране** изберете **ValueMap**.
    8. Изберете **Добавяне на съпоставяне на стойност**.
    9. В лявото поле въведете **4**. В дясното поле въведете **192350001**. 
    10. Изберете **Запиши** и след това затворете диалоговия прозорец.

4. Изберете **Запази като**, за да запазите версията на картата за двойно записване. 
5. В **Добавете таблица** панел, в полето **Издател** изберете **Издател по подразбиране**.
6. В полето **Версия** въведете версията.
7. В полето **Описание** въведете бележка за тази преходна версия на картата. 
8. Изберете **Записване**.
9. Стартирайте картата.

### <a name="migrate-invoiced-milestones-to-the-dataverse-environment"></a>Мигриране на фактурирани етапи към среда на Dataverse

1. В среда на Dataverse за Project Operations създайте етапи, които имат статус на фактура **Готов за фактуриране**. На този етап не мигрирайте етапи, които не са фактурирани.

    > [!NOTE]
    > Преди да мигрирате етапните етапи на фактуриране, уверете се, че финансовите измерения, които са свързани с договорната линия на проекта, са зададени според очакванията. Финансовите измерения не могат да се редактират след приключване на миграцията.

2. След като всички етапи са мигрирани, спрете следните карти с двойно записване:

    - Контролни точки на аспекти на договор за интеграция на Project Operations (msdyn\_contractlinescheduleofvalues)
    - Действителни данни за интеграция на Project Operations (msdyn\_actuals)
    - Предложение за фактуриране по проект, V2 (фактури)

    За да спрете картите, изпълнете следните стъпки:

    1. Във Finance отидете на **Управление на данни** \> **Двойно писане**, изберете карта и отворете подробностите за нея.
    2. Изберете **Стоп** и изчакайте, докато системата спре картата.

3. В средата на Dataverse за Project Operations, създавайте и потвърждавайте проформа фактури за основните етапи на фактуриране. 

    1. В картата на сайта отидете на договорите за проекти, изберете договорите и след това изберете **Създаване на фактури**.
    2. След като фактурите са създадени, отворете ги от **Фактури** меню в картата на сайта и след това изберете **Потвърдете**.

    Тази стъпка създава необходимите записи в средата на Dataverse. Това обаче не засяга финансите и вземанията, тъй като изброените по-рано карти за двойно запис бяха спрени.

4. След като всички проформа фактури бъдат потвърдени, върнете всички карти с двойно записване в първоначалното им състояние.

    1. Актуализирайте версията на картата за двойно записване **Основни етапи на договора за интеграция на Project Operations** (**msdyn\_contractlinescheduleofvalues**) обратно до оригинала. 
    2. Изберете картата с двойно записване в списъка с карти, изберете **Версия на настолна карта** и след това изберете оригиналната версия на картата на таблицата.
    3. Изберете **Записване**.
    4. Рестартирайте следните карти за двойно записване:

        - Контролни точки на аспекти на договор за интеграция на Project Operations (msdyn\_contractlinescheduleofvalues)
        - Действителни данни за интеграция на Project Operations (msdyn\_actuals)
        - Предложение за фактуриране по проект, V2 (фактури)

Основните етапи вече са мигрирани и системата е готова за следващите стъпки в преходната дейност.
