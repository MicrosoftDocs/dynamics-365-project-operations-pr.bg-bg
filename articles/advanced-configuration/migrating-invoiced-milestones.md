---
title: Мигриране на напълно фактурирани етапни цели за фактуриране при cutover
description: Тази статия обяснява как да мигрирате милите етапи на таксуване на фиксирана цена, които са били фактурирани на клиента за отворени договори за проекти преди датата на пускане на живо.
author: sigitac
ms.date: 01/10/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: d7bb3dbb5acd9be447c405ec17f18d00c500f655
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/03/2022
ms.locfileid: "8912227"
---
# <a name="migrate-fully-invoiced-billing-milestones-at-cutover"></a>Мигриране на напълно фактурирани етапни цели за фактуриране при cutover

_**Прилага се за:** Project Operations за сценарии, базирани на ресурси/неналичност_

## <a name="scenario"></a>Сценарий

Contoso отива на живо с Microsoft Dynamics 365 Project Operations за сценарии за ресурси/не-заредени. Като част от дейностите по кройката екипът по изпълнението трябва да мигрира отворени договори за проекти от старата система. Някои от договорите по проекта включват редове от договори, които използват метода на таксуване на фиксирана цена и вече са били частично фактурирани на крайния клиент. Екипът по внедряването трябва да мигрира тези етапни цели за фактуриране като **осчетоводена** фактура на Клиента, защото те трябва да бъдат включени в общата стойност на договора за целите на признаването на приходите. Обаче клиент салда в сметки вземания и счетоводство не трябва да бъдат засегнати.

## <a name="solution"></a>Решение

### <a name="prerequisites"></a>Предварителни изисквания

- Dynamics 365 Finance 10.0.24 или по-нова версия трябва да се инсталира.
- Средата, в която ще бъдат завършени стъпките за миграция, трябва да бъде в режим на поддръжка. Не трябва да се извършват други дейности, докато етапните цели се мигрират.
- Миграционните стъпки трябва да бъдат следвани точно както е описано тук и могат да се използват само за дейността по прерязване. Microsoft не поддържа друго използване на тази възможност.

### <a name="create-a-cutover-version-of-the-project-operations-integration-contract-line-milestones-dual-write-map"></a>Създаване на cutover версия на проект операции интеграция договор линия етапни етапи карта с двойно записване 

1. Уверете се, че съпоставянето на целта за **обекта проект операции интеграция договор ред етапни** цели е актуална. 

    1. Във Финанси отидете **на обекти данни** за управление на \>**данни** и изберете **обекта проект операции интеграция договор ред милите.** 
    2. Изберете **Модифициране на съпоставяния на** цели. 
    3. На постановането " **Карта" до целевата** страница изберете **Генериране на съпоставяне** и след това потвърдете, че искате да генерирате съпоставянето.

2. Спиране и обновяване на **проект операции интеграция договор ред етапни** етапи (**msdyn\_ contractlinescheduleofvalues**) карта с двойно записване. 

    1. Отидете **на Управление на** \> **данни Dual-write**, изберете картата и отворете детайлите й. 
    2. Изберете **Стоп** и изчакайте, докато системата спре картата. 
    3. Изберете **Обновяване на таблици**.

3. Добавяне на съпоставяне за състоянието на транзакцията.

    1. Изберете **Добавяне на съпоставяне**.
    2. В новия ред в **колоната "Финанси и операции"** приложения изберете полето **ТРАНССТАТУС \[ТРАНССТАТУС\]**.
    3. В **Microsoft Dataverse** колоната изберете **състояние\_ на msdyn\[фактуристатус \]** фактура.
    4. В **колоната Тип** карта изберете дясната стрелка (**\>**).
    5. В диалоговия прозорец, който се появява, в **полето Синхронизиране посока** изберете **Dataverse в Приложения** за финанси и операции.
    6. Изберете **Добавяне на трансформация**.
    7. В полето **Тип** трансформация изберете **Карта на** стойността.
    8. Изберете **Добавяне на съпоставяне** на стойност.
    9. В лявото поле въведете **4**. В дясното поле въведете **192350001**. 
    10. Изберете **Запишии** след това затворете диалоговия прозорец.

4. Изберете **Запиши като**, за да запазите версията на картата с двойно записване. 
5. В прозореца Добавяне на **таблица** в полето **Издател** изберете **Издател** по подразбиране.
6. В полето **Версия** въведете версията.
7. В полето **Описание** въведете бележка за тази версия на картата на cutover. 
8. Изберете **Записване**.
9. Стартирай картата.

### <a name="migrate-invoiced-milestones-to-the-dataverse-environment"></a>Мигриране на фактурирани етапни етапи към околната Dataverse среда

1. В средата на операции на Dataverse проекта създайте етапни цели, които имат състояние на фактура на **Готови за фактуриране**. В този момент не мигрирайте никакви етапни етапи, които не са фактурирани.

    > [!NOTE]
    > Преди да мигрирате етапите на фактуриране, уверете се, че финансовите нива на аналитичност, които са свързани с реда на договора за проект, са зададени според очакванията. Финансовите величини не могат да бъдат редактирани след приключване на миграцията.

2. След като всички етапни цели са мигрирани, спрете следните карти с двоен запис:

    - Проект операции интеграция договор ред етапни етапи (msdyn\_ договорредуля на стойности)
    - Действителни данни за интеграция на Project Operations (msdyn\_actuals)
    - Предложение за фактуриране по проект, V2 (фактури)

    За да спрете картите, изпълнете следните стъпки:

    1. Във Финанси отидете **на Управление на** \> **данни Dual-write**, изберете карта и отворете подробностите за нея.
    2. Изберете **Стоп** и изчакайте, докато системата спре картата.

3. В средата на Project Operations Dataverse създайте и потвърдете проформа фактури за етапните етапи на фактуриране. 

    1. В картата на сайта отидете на договорите за проекта, изберете договорите и след това изберете **Създаване на фактури**.
    2. След като фактурите бъдат създадени, отворете ги от **менюто Фактури** в картата на сайта и след това изберете **Потвърждаване**.

    Тази стъпка създава необходимите записи в Dataverse средата. Обаче не засяга финансови средства и сметки вземания, защото по-рано изброените карти с двойна запис са били спрени.

4. След като всички проформа фактури се потвърдят, върнете всички карти с двоен запис в първоначалното им състояние.

    1. Актуализирайте версията на **проект операции интеграция договор ред етапи** (**msdyn\_ contractlinescheduleofvalues**) карта с двойно записване обратно към оригинала. 
    2. Изберете картата с двойно записване в списъка с карти, изберете **Версия** на картата на таблицата и след това изберете оригиналната версия на картата на таблицата.
    3. Изберете **Записване**.
    4. Рестартирайте следните карти с двоен запис:

        - Проект операции интеграция договор ред етапни етапи (msdyn\_ договорредуля на стойности)
        - Действителни данни за интеграция на Project Operations (msdyn\_actuals)
        - Предложение за фактуриране по проект, V2 (фактури)

Етапните цели сега са мигрирани, а системата е готова за следващите стъпки в дейността на кройката.
