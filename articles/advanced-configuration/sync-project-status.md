---
title: Синхронизирайте състоянието на проекта, за да предотвратите вписване срещу затворени проекти
description: Тази статия обяснява как да синхронизирате състоянието на проекта, за да предотвратите влизане срещу неактивни или затворени проекти.
author: ryansandnessMSFT
ms.date: 08/09/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ryansandnessMSFT
ms.openlocfilehash: 7a306da164235f36d9ed5e69196508dce6d257de
ms.sourcegitcommit: 6b6c2bfd04e3e613ed1f38355c7cd47c3a56748d
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 08/24/2022
ms.locfileid: "9348091"
---
# <a name="sync-project-status-to-prevent-entry-against-closed-projects"></a>Синхронизирайте състоянието на проекта, за да предотвратите вписване срещу затворени проекти

_**Прилага се за:** Project Operations за сценарии, базирани на ресурси/неналичност_

## <a name="scenario"></a>Сценарий

Contoso започва да работи с Microsoft Dynamics 365 Project Operations за сценарии с ресурси/без наличност. Като част от нормалните бизнес дейности проектите могат да бъдат завършени или задържани. Можете да деактивирате проекта, за да сте сигурни, че няма да генерирате разходи или фактури.

## <a name="solution"></a>Решение

### <a name="prerequisites"></a>Предварителни изисквания

-   Трябва да се инсталира Microsoft Dynamics 365 Finance 10.0.29 или по-нова версия.
-   Двойна карта за запис 1.0.0.3 за проекти V2 (msdyn\_projects) трябва да бъдат инсталирани или ръчно конфигурирани, както е описано по-долу.

### <a name="create-an-updated-version-of-the-project-operations-integration-projects-v2-dual-write-map"></a>Създайте актуализирана версия на картата за двойно записване на Project Operations интеграция Projects V2

Актуализиране на картата за двоен запис на Project Operations Projects V2:

1. Отидете на работното пространство **Управление на данни** и изберете **Двойно писане**.
2. Изберете плочката **Двойно писане**.
3. от колоната **Карта на таблица** намерете и изберете **Project V2 (msdyn\_projects)** и след това изберете Стоп.
4. Изберете името на картата, за да отворите картата и след това изберете **[Няма]**.
5. От диалоговия прозорец Избор на колона изберете **statecode \[Project Status\]** и след това изберете OK. Можете да пишете **състояние** в стойността на филтъра, за да стесните списъка.
6.  Изберете **Добавете или редактирайте трансформация** в **тип карта** колона за редактиране на трансформацията.
7.  От **Тип трансформация** изберете **ValueMap**.
8.  Изберете **Добавете картографиране на стойност** и след това добавете следното **Ключове** и **Стойности**:

   Клавиш       | Стойност 
   ----------|-------
   В процес | 0     
   Завършен | 1     

![Екранна снимка, показваща картографирането с двоен запис](media/projectstage-dw-mapping.png)

9. Изберете **Записване**.
10. От върха на **Двойно записване > Проекти V2 (msdyn_projects)** страница, изберете **Запази като**.
11. От **Добавете таблица**, в полето **Издател** изберете **Издател по подразбиране на CDS**.
12. Задайте полето **Версия** на 1.0.0.3.
13. Въведете **Описание** и след това изберете **Запазване**.
14. От горната част на **Двойно записване > Проекти V2 (msdyn_projects)** страница, изберете **Изпълнение**, за да стартирате картата и след това изберете **да**, ако бъде поискано потвърждение преди изпълнение. 

### <a name="close-a-newly-completed-project"></a>Затворете новозавършен проект

Dynamics 365 Finance използва **етап на проекта** поле за разграничаване на проектите **в процес** или **завършено**. **Завършените** проекти не могат да носят разходи или да бъдат фактурирани на клиенти.

1. Отворете проект за деактивиране.
2. От лентата изберете **Деактивиране**.

> [!NOTE]
> Можете да деактивирате или затворите проект, тъй като и двата ще се държат еднакво в контекста на финансите.

3. Във Финанси отворете страницата **Списък на всички проекти**.
4. Потвърдете, че деактивираният проект не се показва в списъка.
5. В **Показване на проекти** филтър над списъка, променете стойността от **Активен** на **Всички**.
6. Сега ще видите деактивирания проект.

Ако се опитате да регистрирате време или разходи срещу този проект във Финанси, не трябва да виждате проекта за избор. Ако ръчно въведете номера на проекта за разход, ще видите съобщение като „Завършеният етап на проекта не позволява запис в проекта“. Фактурирането и другите функции за фактуриране трябва да бъдат деактивирани, тъй като ще бъдат в контекста на затворен проект.

