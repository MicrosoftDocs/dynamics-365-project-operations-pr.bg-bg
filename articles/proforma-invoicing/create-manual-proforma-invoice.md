---
title: Проформа фактури
description: Тази статия предоставя информация за проформа фактури в Операции на проекта.
author: rumant
ms.date: 04/05/2021
ms.topic: article
ms.prod: ''
ms.reviewer: johnmichalak
ms.author: rumant
ms.openlocfilehash: 7b56c3908cce3115d5c95a4b1b233db70fb6c149
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/03/2022
ms.locfileid: "8920553"
---
# <a name="proforma-invoices"></a>Проформа фактури

_**Прилага се за:** Project Operations за сценарии, базирани на ресурси/неналичност_

Фактурирането на проформа дава на мениджърите на проекти второ ниво на одобрение, преди да създадат фактури за клиенти. Първото ниво на одобрение се попълва, когато се одобрят записите за часа, разходите и материалите, които членовете на екипа по проекта подават. Потвърдените проформа фактури са налични в модула Project Accounting на Project Operations. Счетоводителите на проекти могат да извършват допълнителни актуализации като данък върху продажбите, счетоводство и оформление на фактури.


## <a name="creating-project-invoices"></a>Създаване на фактури за проект

Фактурите по проект могат да бъдат създавани индивидуално или групово. Можете да ги създавате ръчно или да ги конфигурирате да се генерират в автоматизирани цикли.

### <a name="manually-create-project-invoices"></a>Ръчно създаване на фактури по проект 

От страницата със списъка **Договори по проекти** можете да създавате фактури по проекти поотделно за всеки договор по проект или групово за няколко договора по проекти.

Изпълнете тази стъпка, за да създадете фактура за конкретен договор по проект.

- На страницата със списъка **Договори по проект** отворете договор по проект и след това изберете **Създаване на фактура**.

    Генерира се фактура за всички транзакции за избрания договор по проект, които имат състояние **Готово за фактуриране**. Тези транзакции включват време, разходи, материали, етапи и други нефактулирани редове на дневника за продажби.

Изпълнете следните стъпки, за да създадете групово фактури.

1. На страницата със списъка **Договори по проекти** изберете един или повече договори по проекти, за които трябва да създадете фактура, след което изберете **Създаване на фактури за проект**.

    Предупредително съобщение ви информира, че може да има закъснение, преди да бъдат създадени фактурите. Процесът също е показан.

2. Изберете **ОК**, за да затворите прозореца на съобщението.

    Генерира се фактура за всички транзакции в ред на договор, които имат състояние **Готово за фактуриране**. Тези транзакции включват време, разходи, материали, етапи и други нефактулирани редове на дневника за продажби.

3. За да прегледате генерираните фактури, отидете на **Продажби** \> **Фактуриране** \> **Фактури**. Ще видите една фактура за всеки договор по проект.

### <a name="set-up-automated-creation-of-project-invoices"></a>Настройване на автоматизирано създаване на фактури за проект 

Изпълнете следните стъпки, за да конфигурирате автоматичен цикъл на фактуриране.

1. Отидете в **Настройки** \> **Пакетни задания**.
2. Създайте пакетно задание и го наименувайте **Създаване на фактури в Project Operations**. Името на пакетното задание трябва да включва термина „създаване на фактури“.
3. В полето **Тип задание** изберете **Няма**. По подразбиране опциите **Честота дневно** и **Е активно** са зададени на **Да**.
4. Изберете **Стартиране на работен поток**. В диалоговия прозорец **Търсене на запис** ще видите три работни процеса:

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. Изберете **ProcessRunCaller** и след това **Добавяне**.
6. В следващия диалогов прозорец изберете **OK**. Работен поток **Заспиване** е последван от работен поток **Обработване**.

    Можете също да изберете **ProcessRunner** в стъпка 5. След това, когато изберете **OK**, работният поток **Обработка** е последван от работен поток **Заспиване**.

Работните потоци **ProcessRunCaller** и **ProcessRunner** създават фактури. **ProcessRunCaller** извиква **ProcessRunner**. **ProcessRunner** е работният поток, който всъщност създава фактурите. Той преминава през всички редове на договора, за които трябва да бъдат създадени фактури, и създава фактури за тези редове. За да определи редовете на договора, за които трябва да бъдат създадени фактури, заданието търси в датите на изпълнение на фактурите за редовете на договора. Ако редове на договор, които принадлежат към един договор, имат една и съща дата на изпълнение на фактура, транзакциите се комбинират в една фактура, която има два реда. Ако няма транзакции, за които да бъдат създадени фактури, заданието пропуска създаването на фактури.

След като **ProcessRunner** завърши изпълнението на цикъла, той извиква **ProcessRunCaller**, дава крайния час, и се затваря. **ProcessRunCaller** след това стартира таймер, който работи в продължение на 24 часа от посочения краен час. В края на таймера **ProcessRunCaller** се затваря.

Заданието за пакетно обработване за създаване на фактури е повтарящо се задание. Ако това пакетно обработване се изпълнява много пъти, се създават няколко екземпляра на заданието и причиняват грешки. Затова трябва да стартирате пакетното обработване само един път и трябва да го рестартирате само ако спре да работи.

> [!NOTE]
> Партидното фактуриране се изпълнява само за линиите на договор за проект, които са конфигурирани от графици за фактури. Аспекти на договор с метод на фактуриране по фиксирана цена трябва да имат конфигурирани контролни точки. Аспекти на договор по проект с метод на фактуриране по време и материали ще се нуждаят от зададен график за фактуриране, базиран на дата. Същото се отнася и за аспекти на договор, базирани на проект.      
 
### <a name="edit-a-draft-invoice"></a>Редактиране на чернова на фактура

Когато създавате чернова на фактура по проект, всички нефактурирани продажбени транзакции, които са създадени, когато са одобрени записите за време, разходи и използване на материали, се изтеглят във фактурата. Можете да направите следните корекции, докато фактурата все още е в етап на чернова:

- Изтриване или редактиране на подробностите за ред на фактурата.
- Редактиране и коригиране на количеството и типа фактуриране.

Изберете **Потвърждаване**, за да потвърдите фактура. Действието за потвърждаване е еднопосочно. Когато изберете **Потвърждаване**, системата прави фактурата само за четене и създава фактурирани действителни продажби от всяка подробност за ред на фактурата за всеки ред на фактурата. Ако подробностите за реда на фактурата се позовават на нефактурирана действителна продажба, системата също така сторнира нефактурираната действителна продажба. (Всички подробности за ред на фактура, създадени от запис за време или разходи, ще се позовават на нефактурирана действителна продажба.) Интеграционни системи за счетоводство могат да използват това сторниране, за да сторнират незавършено производство (НП) за счетоводни цели.

> [!NOTE]
> Потвърдените проформа фактури и свързаните записи като редове от фактури и подробности за реда от фактура не могат да се редактират или изтриват. 

### <a name="correct-a-confirmed-invoice"></a>Коригиране на потвърдена фактура

Потвърдени фактури могат да бъдат редактирани (коригирани). Когато коригирате потвърдена фактура, се създава нова чернова на коригираща фактура. Тъй като се предполага, че искате да сторнирате всички транзакции и количества от първоначалната фактура, тази коригираща фактура включва всички транзакции от оригиналната фактура и всички количества в нея са 0 (нула).

Ако транзакциите не изискват корекция, можете да ги премахнете от черновата на коригираща фактура. Ако искате да сторнирате или да върнете само частично количество, можете да редактирате полето **Количество** в подробностите за реда. Ако отворите подробностите за реда на фактурата, можете да видите количеството в първоначалната фактура. След това можете да редактирате количеството в текущата фактура, така че да е по-малко или повече от количеството в първоначалната фактура.

Когато потвърдите коригираща фактура, първоначално фактурираните действителни продажби се сторнират и се създават нови фактурирани действителни продажби. Ако количеството е било намалено, разликата ще доведе до създаването също и на нова нефактурирана действителна продажба. Например, ако първоначалната фактурирана продажба са били за осем часа, а подробностите на реда на коригиращата фактура имат намалено количество от шест часа, редът на първоначално фактурираната продажба се сторнира и създава две нови действителни данни:

- фактурирана действителна продажба за шест часа.
- нефактурирана действителна продажба за оставащите два часа. Тази транзакция може или да бъде фактурирана по-късно, или отбелязана като неплатима, в зависимост от договорките с клиента.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
